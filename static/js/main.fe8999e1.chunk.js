(this.webpackJsonpkeepexplorer=this.webpackJsonpkeepexplorer||[]).push([[5],{118:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var a=n(5),r=n.n(a),l=n(9),o=n(59),i=n(22),c=n(27),s=n(36),u=n(37),d=n(190),m=n.n(d),p=n(105),E=n.n(p),h=n(28),b=E.a.digest,f=function(t){Object(s.a)(a,t);var n=Object(u.a)(a);function a(e){var t;return Object(i.a)(this,a),(t=n.call(this)).electrumClient=void 0,t.handleNewBlock=function(e){var n,a=Object(o.a)(e);try{for(a.s();!(n=a.n()).done;){var r=n.value,l=r.height;console.log("Received notification of a new block at height: [".concat(l,"]")),t.emit("block",r)}}catch(i){a.e(i)}finally{a.f()}},t.electrumClient=new m.a(e.server,e.port,e.protocol,e.options),t.on("newListener",(function(){t.startBlockListening()})),t.on("removeListener",(function(){return t.stopBlockListening()})),t}return Object(c.a)(a,[{key:"connect",value:function(){var e=Object(l.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Connecting to electrum server..."),e.next=3,this.electrumClient.connect("tbtc","1.4.2").catch((function(e){throw new Error("failed to connect: [".concat(e,"]"))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=Object(l.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Closing connection to electrum server..."),this.electrumClient.close();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"latestBlockHeight",value:function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.electrumClient.blockchain_headers_subscribe().catch((function(e){throw new Error("failed to get block header: [".concat(e,"]"))}));case 2:return t=e.sent,e.abrupt("return",t.height);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTransaction",value:function(){var e=Object(l.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.electrumClient.blockchain_transaction_get(t,!0).catch((function(e){throw new Error("failed to get transaction: [".concat(e,"]"))}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"broadcastTransaction",value:function(){var e=Object(l.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.electrumClient.blockchain_transaction_broadcast(t).catch((function(e){throw new Error("failed to broadcast transaction: [".concat(e,"]"))}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUnspentToScript",value:function(){var e=Object(l.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g(t),e.next=3,this.electrumClient.blockchain_scripthash_listunspent(n).catch((function(e){throw new Error(JSON.stringify(e))}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBalanceOfScript",value:function(){var e=Object(l.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g(t),e.next=3,this.electrumClient.blockchain_scripthash_getBalance(n).catch((function(e){throw new Error(JSON.stringify(e))}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTransactionToScript",value:function(){var e=Object(l.a)(r.a.mark((function e(t,n){var a,o,i,c=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g(t),e.next=3,this.electrumClient.blockchain_scripthash_subscribe(a).catch((function(e){throw new Error("failed to subscribe: ".concat(e))}));case 3:return o=e.sent,e.next=6,n(o);case 6:if(!(i=e.sent)){e.next=11;break}return e.next=10,this.electrumClient.blockchain_scripthash_unsubscribe(a).catch((function(e){throw new Error("failed to unsubscribe: ".concat(e))}));case 10:return e.abrupt("return",i);case 11:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(r.a.mark((function e(t){var o,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,o="blockchain.scripthash.subscribe",i=c.electrumClient,s=function(){var e=Object(l.a)(r.a.mark((function e(l){var c,u,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=l[0],u=l[1],console.log("Received notification for script hash: [".concat(c,"] with status: [").concat(u,"]")),c!=a){e.next=13;break}return e.next=6,n(u);case 6:if(!(d=e.sent)){e.next=13;break}return e.next=10,i.subscribe.off(o,s);case 10:return e.next=12,i.blockchain_scripthash_unsubscribe(a).catch((function(e){throw new Error("failed to unsubscribe: ".concat(e))}));case 12:return e.abrupt("return",t(d));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.electrumClient.subscribe.on(o,s),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error("failed listening for notification: ".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"startBlockListening",value:function(){var e="blockchain.headers.subscribe";if(0==this.listenerCount("block")){try{this.electrumClient.subscribe.on(e,this.handleNewBlock)}catch(t){throw new Error("failed listening for notification: ".concat(t))}console.log('ElectrumClient: First "block" listener added, subscribing to server\'s '.concat(e))}}},{key:"stopBlockListening",value:function(){var e="blockchain.headers.subscribe";0==this.listenerCount("block")&&(this.electrumClient.subscribe.off(e,this.handleNewBlock),console.log('ElectrumClient: No "block" listeners, unsubscribing from server\'s '.concat(e)))}},{key:"getMerkleRoot",value:function(){var t=Object(l.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.electrumClient.blockchain_block_header(n).catch((function(e){throw new Error("failed to get block header: [".concat(e,"]"))}));case 2:return a=t.sent,t.abrupt("return",e.from(a,"hex").slice(36,68));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getHeadersChain",value:function(){var e=Object(l.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.electrumClient.blockchain_block_headers(t,n+1).catch((function(e){throw new Error("failed to get block headers: [".concat(e,"]"))}));case 2:return a=e.sent,e.abrupt("return",a.hex);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTransactionMerkle",value:function(){var e=Object(l.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.electrumClient.blockchain_transaction_getMerkle(t,n).catch((function(e){throw new Error("failed to get transaction merkle: [".concat(e,"]"))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findOutputForAddress",value:function(){var e=Object(l.a)(r.a.mark((function e(t,n){var a,l,i,c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTransaction(t).catch((function(e){throw new Error("failed to get transaction: [".concat(e,"]"))}));case 2:a=e.sent,l=a.vout,i=0;case 5:if(!(i<l.length)){e.next=26;break}c=Object(o.a)(l[i].scriptPubKey.addresses),e.prev=7,c.s();case 9:if((s=c.n()).done){e.next=15;break}if(s.value!=n){e.next=13;break}return e.abrupt("return",i);case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),c.e(e.t0);case 20:return e.prev=20,c.f(),e.finish(20);case 23:i++,e.next=5;break;case 26:throw new Error("output for address ".concat(n," not found"));case 27:case"end":return e.stop()}}),e,this,[[7,17,20,23]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTransactionsForScript",value:function(){var e=Object(l.a)(r.a.mark((function e(t){var n,a,l,o=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g(t),e.next=3,this.electrumClient.blockchain_scripthash_getHistory(n);case 3:return a=e.sent,e.next=6,Promise.all(a.map((function(e){return e.tx_hash})).map((function(e){return o.getTransaction(e)})));case 6:return l=e.sent,e.abrupt("return",l);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(h.EventEmitter);function g(t){return b(e.from(t,"hex")).reverse().toString("hex")}}).call(this,n(8).Buffer)},197:function(e,t,n){e.exports=n(296)},202:function(e,t,n){},295:function(e,t){},296:function(e,t,n){"use strict";n.r(t);var a,r=n(0),l=n.n(r),o=n(110),i=n.n(o),c=(n(202),n(13)),s=n(3),u=n(14),d=n(68),m=n(16),p=n(6);function E(e){return l.a.createElement("div",{style:e.style,className:Object(p.a)(a||(a=Object(s.a)(["\n    background: #FFFFFF;\n    box-shadow: 0px 4px 8px rgba(20, 20, 20, 0.20);\n    border-radius: 4px;\n    padding: ","\n  "])),(null===e||void 0===e?void 0:e.padding)?"20px":"0")},e.children)}var h,b=n(15);function f(e){return r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",fill:"silver"},e),r.createElement("path",{d:"M40.96 4.98a2 2 0 00-.22.02H28a2 2 0 100 4h8.172L22.586 22.586a2 2 0 102.828 2.828L39 11.828V20a2 2 0 104 0V7.246a2 2 0 00-2.04-2.266zM12.5 8C8.383 8 5 11.383 5 15.5v20c0 4.117 3.383 7.5 7.5 7.5h20c4.117 0 7.5-3.383 7.5-7.5V26a2 2 0 10-4 0v9.5c0 1.947-1.553 3.5-3.5 3.5h-20A3.483 3.483 0 019 35.5v-20c0-1.947 1.553-3.5 3.5-3.5H22a2 2 0 100-4h-9.5z"}))}function g(e){return(null===e||void 0===e?void 0:e.toLowerCase())=="0x526c08E5532A9308b3fb33b7968eF78a5005d2AC".toLowerCase()}function v(e,t){return g(e)&&"ACTIVE"==t}!function(e){e[e.ROPSTEN=0]="ROPSTEN",e[e.MAINNET=1]="MAINNET"}(h||(h={}));var w=l.a.createContext({network:h.MAINNET});function M(e){return l.a.createElement(w.Provider,{value:{network:e.network}},e.children)}function y(){return Object(r.useContext)(w).network}function j(){return y()==h.ROPSTEN}function T(){return j()?"ropsten.etherscan.io":"etherscan.io"}function D(){return j()?"dapp.test.tbtc.network":"dapp.tbtc.network"}function k(){return j()?"https://www.blockchain.com/btc-testnet":"https://www.blockchain.com/btc"}var N,L=n(121),A=n(67),I=n(181),x=n.n(I),S=l.a.createContext({block:void 0});function O(e){var t=Object(m.h)(),n=new URLSearchParams(t.search),a=n.get("block")?parseInt(n.get("block")):void 0;return l.a.createElement(S.Provider,{value:{block:a}},e.children)}function C(){var e=Object(r.useContext)(S);return e.block?e.block:null}function z(){return!!Object(r.useContext)(S).block}function B(e,t){var n=C(),a=Object(r.useMemo)((function(){if(n)return e;for(var t=e,a=e.definitions[0].selectionSet.selections.length,r=0;r<a;r++){var l,o=null===(l=e.definitions[0].selectionSet.selections[r].arguments)||void 0===l?void 0:l.findIndex((function(e){return"block"===e.name.value}));o&&(t=x()(t,{definitions:{0:{selectionSet:{selections:Object(A.a)({},r,{arguments:{$unset:[o.toString()]}})}}}}))}return t}),[e,n]);return Object(u.useQuery)(a,Object(b.a)(Object(b.a)({},t),{},{variables:Object(b.a)(Object(b.a)({},null===t||void 0===t?void 0:t.variables),{},{block:n?{number:n}:void 0})}))}function R(e){var t=e.to,n=Object(L.a)(e,["to"]),a=C(),r=a?t+"?block="+a:t;return l.a.createElement(d.b,Object.assign({},n,{to:r}))}function U(e){var t,n=T();return g(e.address)&&(t="Vending Machine"),l.a.createElement(Y,{hash:e.address,to:e.to||"https://".concat(n,"/address/").concat(e.address),includeExternalIcon:e.includeExternalIcon,children:e.children||t,long:e.long})}function P(e){var t=k();return l.a.createElement(U,{address:e.address,to:"".concat(t,"/address/").concat(e.address)})}function F(e){var t=T();return l.a.createElement(Y,{hash:e.tx,to:e.to||"https://".concat(t,"/tx/").concat(e.tx),includeExternalIcon:e.includeExternalIcon,children:e.children})}function Y(e){var t;if(!e.hash)return null;var n,a={},r=!1;e.to?e.to.startsWith("http")?(n="a",r=!0,a=Object(b.a)(Object(b.a)({},a),{},{href:e.to})):(n=R,r=!0,a.to=e.to):n="span";var o=e.hash,i=0==(null===(t=o)||void 0===t?void 0:t.indexOf("0x"));i&&(o=o.slice(2));var c,u=o.slice(0,4)+"\u2026"+o.slice(o.length-4);c=e.children?e.children:l.a.createElement(l.a.Fragment,null,i?l.a.createElement("span",{style:{color:r?"#bda8e9":void 0}},"0x"):null,e.long?o:u);var d=l.a.createElement(n,a,l.a.createElement("span",null,c,e.includeExternalIcon?l.a.createElement("span",{className:Object(p.a)(N||(N=Object(s.a)(["\n        font-size: 0.8em;\n        padding-left: 0.2em;\n       "])))},l.a.createElement(f,null)):null));return l.a.createElement("span",null,d)}var G=n(24),W=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48"},e,{ref:t}),r.createElement("path",{d:"M24 3.998c-11.028 0-20 8.972-20 20 0 3.275.863 6.337 2.262 9.066l-2.168 7.762c-.505 1.804 1.278 3.587 3.082 3.082l7.767-2.168c2.728 1.396 5.785 2.258 9.057 2.258 11.028 0 20-8.972 20-20s-8.972-20-20-20zm0 3c9.406 0 17 7.594 17 17 0 9.406-7.594 17-17 17-3.002 0-5.81-.78-8.258-2.144a1.5 1.5 0 00-1.133-.135l-7.386 2.06 2.062-7.383a1.5 1.5 0 00-.135-1.134A16.89 16.89 0 017 23.998c0-9.406 7.594-17 17-17zM24 13c-3.296 0-6 2.704-6 6a1.5 1.5 0 103 0c0-1.674 1.326-3 3-3s3 1.326 3 3c0 1.586-.643 2.053-1.773 3.11-1.13 1.056-2.727 2.697-2.727 5.39a1.5 1.5 0 103 0c0-1.66.654-2.152 1.773-3.2C28.393 23.255 30 21.65 30 19c0-3.296-2.704-6-6-6zm0 18a2 2 0 000 4 2 2 0 000-4z"}))}));function Q(e){var t=e.size?"".concat(e.size,"em"):"1em";return r.createElement(G.a,{content:e.children,singleton:e.singleton},r.createElement(W,{width:t,height:t}))}var H,Z,K,_=n(23),q=n(187),J=n.n(q);function X(e){return l.a.createElement("table",{style:e.style,className:J()(Object(p.a)(H||(H=Object(s.a)(["\n        border-collapse: collapse;\n        \n        & td, th {\n          text-align: left;\n        }\n        & td {\n          border-bottom: 1px solid #f5f5f5;\n        }\n        & tr:hover td {\n          background-color: #f5f5f5;          \n        }\n      "]))),e.className)},e.children)}function V(e){var t=Object(r.useState)(e),n=Object(c.a)(t,2),a=n[0],l=n[1],o=Object(r.useState)("desc"),i=Object(c.a)(o,2);return{column:a,setColumn:l,direction:i[0],setDirection:i[1]}}function $(e){var t=e.fieldId==e.state.column,n=Object(r.useCallback)((function(t){t.preventDefault(),e.state.column===e.fieldId?e.state.setDirection("desc"==e.state.direction?"asc":"desc"):e.state.setColumn(e.fieldId)}),[e.state,e.fieldId]);return l.a.createElement("div",{onClick:n,style:{cursor:"pointer"}},t?l.a.createElement("span",null,"desc"==e.state.direction?"\u25bc":"\u25b2"):null,e.children)}function ee(e){var t=Object(r.useCallback)((function(t){t.preventDefault(),e.sortState.setColumn(e.column.id),e.sortState.setDirection(e.column.isSortedDesc?"asc":"desc")}),[e.column,e.sortState]),n=e.column;return l.a.createElement("div",{onClick:n.canSort?t:void 0,style:{cursor:n.canSort?"pointer":void 0}},e.column.canSort&&e.column.isSorted?l.a.createElement("span",null,e.column.isSortedDesc?"\u25bc":"\u25b2"):null,n.label," ",n.tooltip?l.a.createElement(Q,null,n.tooltip):null)}var te,ne,ae=Object(u.gql)(Z||(Z=Object(s.a)(['\n  subscription WatchPrice {\n    priceFeed(id: "0x81a679f98b63b3ddf2f17cb5619f4d6775b3c5ed") {\n      val,\n      timestamp,\n      blockNumber,\n      transactionHash\n    }\n  }\n']))),re=Object(u.gql)(K||(K=Object(s.a)(['\n    query GetBlockPrice($block: Block_height) {\n        priceFeed(id: "0x81a679f98b63b3ddf2f17cb5619f4d6775b3c5ed", block: $block) {\n            val,\n            timestamp,\n            blockNumber,\n            transactionHash\n        }\n    }\n'])));function le(){var e=C(),t=Object(u.useSubscription)(ae,{skip:!!e}),n=Object(u.useQuery)(re,{skip:!e,variables:{block:{number:e}}}),a=e?n:t,l=a.data;a.loading,a.error;return Object(r.useMemo)((function(){if(!l)return null;var e=l.priceFeed;if(!l.priceFeed)return null;var t=oe(e.val);return Object(b.a)(Object(b.a)(Object(b.a)({},e),t),{},{val:t.btcPerEth})}),[l])}function oe(e){var t=parseInt(e)/Math.pow(10,18),n=1e8*t*1e-18;return{weiPerSat:1/n,satPerWei:n,btcPerEth:t}}function ie(e){return l.a.createElement("div",{style:e.style,className:Object(p.a)(te||(te=Object(s.a)(["\n      font-size: 35px;\n      color: #0A0806;\n      \n      font-feature-settings: 'zero' on;\n    "])))},l.a.createElement("div",{className:Object(p.a)(ne||(ne=Object(s.a)(["                         \n        font-size: 16px;\n      "])))},e.label," ",e.tooltip?l.a.createElement(Q,null,e.tooltip):null),l.a.createElement("div",null,e.children))}function ce(e){return 1e-18*e}function se(e){return 1e-18*e}var ue,de,me,pe,Ee,he,be,fe=n(26);function ge(e){return e instanceof fe.DateTime?e:fe.DateTime.fromSeconds("string"===typeof e?parseInt(e):e)}function ve(e){if(!e.time)return null;var t=ge(e.time),n=t.toRelative();return l.a.createElement("span",{title:t.toLocaleString(fe.DateTime.DATETIME_FULL)},n)}function we(e){return e<120?fe.Duration.fromObject({seconds:e}).toFormat("s's'"):e<5400?fe.Duration.fromObject({seconds:e}).toFormat("m'm' s's'"):e<129600?fe.Duration.fromObject({seconds:e}).toFormat("h'h' m'm'"):e<22896e3?fe.Duration.fromObject({seconds:e}).toFormat("d'd 'h'h'"):fe.Duration.fromObject({seconds:e}).toFormat("y'y 'd'd'")}function Me(e){var t=ge(e.time),n={weekday:"short",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"},a={full:{weekday:"short",month:"short",year:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit"},long:n,simple:{month:"short",day:"2-digit"},"day-full":{month:"short",day:"2-digit",year:"numeric"}}[e.format],r="long"===e.format?"":t.toLocaleString(n);return l.a.createElement("span",{title:r},t.toLocaleString(a))}function ye(e){if(!e.earlier||!e.later)return null;var t=ge(e.earlier),n=ge(e.later),a=n.diff(t,["seconds"]);return l.a.createElement("span",{title:n.toLocaleString(fe.DateTime.DATETIME_FULL)},we(a.seconds))}function je(e){return l.a.createElement("div",{style:e.style,className:Object(p.a)(ue||(ue=Object(s.a)(["\n    display: flex;\n    flex-direction: row;\n    & > * {\n      margin-right: 40px;\n    }\n    & > :last-child {\n      margin-right: 0px;\n    }\n  "])))},e.children)}function Te(e){return l.a.createElement("div",{style:{marginBottom:"20px"},className:Object(p.a)(de||(de=Object(s.a)(["\n      display: flex;\n      flex-direction: row;         \n   "])))},l.a.createElement("div",{className:Object(p.a)(me||(me=Object(s.a)(["\n      display: flex;\n      flex-direction: column;\n      \n      align-self: flex-start;\n      flex: 1;         \n   "])))},l.a.createElement("div",{className:Object(p.a)(pe||(pe=Object(s.a)(["        \n        display: flex;\n        flex-direction: row;\n        align-items: center;         \n     "])))},l.a.createElement("h1",{className:Object(p.a)(Ee||(Ee=Object(s.a)(["\n            margin: 0px;                             \n         "])))},e.label),l.a.createElement("div",{className:Object(p.a)(he||(he=Object(s.a)(["\n          margin-left: 15px;\n        "])))},e.buttons)),l.a.createElement("div",{style:{color:"gray"}},e.subtitle)),e.children)}Me.defaultProps={format:"long"};var De=Object(p.a)(be||(be=Object(s.a)(["\n  width: 140px;\n  height: 1em;\n  border-radius: 3px;\n  background-color: #eee;\n  background-image: linear-gradient(90deg, #eee 0px, #e8e8e8 40px, #eee 80px);\n  background-size: 600px;\n  animation: shine-lines 1.6s infinite linear;\n  \n  @keyframes shine-lines {\n    0% {\n      background-position: -100px;\n    }\n    40%, 100% {\n      background-position: 140px;\n    }\n  }\n"])));function ke(e){return l.a.createElement("tr",null,Array(e.columns).fill(1).map((function(e,t){return l.a.createElement("td",{key:t},l.a.createElement("div",{className:De}))})))}var Ne=new Intl.NumberFormat("en-US",{style:"percent",maximumFractionDigits:2}),Le=new Intl.NumberFormat("en-US",{maximumFractionDigits:2});function Ae(e){return Le.format("string"===typeof e?parseFloat(e):e)}function Ie(e){return Ne.format("string"===typeof e?parseFloat(e):e)}function xe(){return l.a.createElement(ze,{currency:"BTC"})}function Se(e){return l.a.createElement(ze,{currency:e.symbol?"\u039e":"ETH"})}function Oe(){return l.a.createElement(ze,{currency:"KEEP"})}function Ce(){return l.a.createElement(ze,{currency:"GWEI"})}function ze(e){return l.a.createElement("span",{style:{color:"gray",fontSize:"0.8em"}},e.currency)}var Be,Re,Ue=n(5),Pe=n.n(Ue),Fe=n(9),Ye={prices:null,events:new(n(28).EventEmitter)};function Ge(){var e=Object(r.useState)(0),t=Object(c.a)(e,2),n=(t[0],t[1]);return Object(r.useEffect)((function(){var e=function(){n((function(e){return e+1}))};return Ye.events.on("update",e),function(){Ye.events.off("update",e)}}),[]),Ye.prices||{}}function We(e){var t=Object(r.useMemo)((function(){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0,minimumFractionDigits:0})}),[]);return l.a.createElement(l.a.Fragment,null,t.format(e.dollar))}!function(){var e=function(){var e=Object(Fe.a)(Pe.a.mark((function e(){var t,n;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin%2Cethereum%2Ckeep-network&vs_currencies=usd");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,Ye.prices={bitcoin:n.bitcoin.usd,ethereum:n.ethereum.usd,keep:n["keep-network"].usd},Ye.events.emit("update");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Ye.handle=setInterval(Object(Fe.a)(Pe.a.mark((function t(){return Pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e();case 1:case"end":return t.stop()}}),t)}))),2e4),e()}();var Qe=Object(u.gql)(Be||(Be=Object(s.a)(['\n    query GetOperators(\n        $orderBy: Operator_orderBy,\n        $direction: OrderDirection,\n        $block: Block_height\n    ) {\n        operators(first: 1000, orderBy: $orderBy, orderDirection: $direction, block: $block) {\n            id,\n            address,\n            bonded,\n            stakedAt,\n            unboundAvailable,\n            totalKeepCount,\n            activeKeepCount,\n            stakedAmount,\n            totalFaultCount,\n            attributableFaultCount,\n            totalTBTCRewards,\n            totalETHRewards,\n            randomBeaconOperatorAuthorized,\n            bondedECDSAKeepFactoryAuthorized,\n            tbtcSystemSortitionPoolAuthorized,\n            stakedropRewardWeight\n        },\n        stats: statsRecord(id: "current", block: $block) {\n            availableToBeBonded,\n            totalBonded\n        },\n        status: statusRecord(id: "current", block: $block) {\n            totalRewardWeight\n        }\n    }\n'])));function He(){var e,t,n,a=V("activeKeepCount"),r=Ge(),o=B(Qe,{variables:{orderBy:a.column,direction:a.direction}}),i=o.loading,c=o.error,s=o.data,u=le();if(c)return l.a.createElement("p",null,"Error :( ",""+c);var d=(null===u||void 0===u?void 0:u.val)?parseFloat(null===s||void 0===s||null===(e=s.stats)||void 0===e?void 0:e.availableToBeBonded)/1.5*u.val:null,m=parseInt(null===s||void 0===s||null===(t=s.stats)||void 0===t?void 0:t.totalBonded)+parseInt(null===s||void 0===s||null===(n=s.stats)||void 0===n?void 0:n.availableToBeBonded);return l.a.createElement("div",{style:{padding:"20px"}},l.a.createElement(_.a,null,l.a.createElement("title",null,"Operators")),l.a.createElement(Te,{label:"Operators"},(null===s||void 0===s?void 0:s.stats)?l.a.createElement(je,null,l.a.createElement(ie,{label:"total collateral locked",tooltip:"The amount of ETH collateral in the system (bonded + available for new deposits)"},l.a.createElement("div",null,l.a.createElement(Se,{symbol:!0})," ",Ke.format(m),(null===r||void 0===r?void 0:r.ethereum)?l.a.createElement("div",{style:{fontSize:"20px",color:"gray"}},l.a.createElement(We,{dollar:r.ethereum*m})):null)),l.a.createElement(ie,{label:"collateral bonded",tooltip:"The amount of collateral currently in use backing active deposits."},l.a.createElement("div",null,l.a.createElement(Se,{symbol:!0})," ",Ke.format(s.stats.totalBonded))),l.a.createElement(ie,{label:"free collateral",tooltip:"The amount of collateral put up by signers still available for new deposits. BTC value is based on a 150% collateralization ratio."},l.a.createElement("div",null,l.a.createElement(Se,{symbol:!0})," ",Ke.format(s.stats.availableToBeBonded)),null!==d?l.a.createElement("div",{style:{fontSize:"20px",color:"gray"}},"capacity ~",Ze.format(d)," BTC"):null)):null),l.a.createElement(E,{padding:!0},l.a.createElement(qe,{data:s,sortState:a,loading:i})))}var Ze=new Intl.NumberFormat("en-US",{maximumFractionDigits:2}),Ke=new Intl.NumberFormat("en-US",{maximumFractionDigits:0}),_e=new Intl.NumberFormat("en-US",{maximumFractionDigits:6});function qe(e){var t=e.data,n=T(),a=le();return l.a.createElement(X,{style:{width:"100%"}},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Address"),l.a.createElement("th",null,l.a.createElement($,{fieldId:"activeKeepCount",state:e.sortState},"# Keeps ",l.a.createElement(Q,null,"Number of keeps/deposits this operator is securing."))),l.a.createElement("th",null,l.a.createElement($,{fieldId:"bonded",state:e.sortState},"Amount Bonded ",l.a.createElement(Q,null,"Collateral backing active deposits."))),l.a.createElement("th",null,l.a.createElement($,{fieldId:"unboundAvailable",state:e.sortState},"Amount Available",l.a.createElement(Q,null,"Collateral available for further deposits. The BTC number indicates the lot size this amount of ETH is able to support."))),l.a.createElement("th",null,l.a.createElement($,{fieldId:"stakedAmount",state:e.sortState},"Amount Staked ",l.a.createElement(Q,null,"The stake will be seized in case of fraud."))),l.a.createElement("th",null,l.a.createElement($,{fieldId:"totalTBTCRewards",state:e.sortState},"BTC Earnings ",l.a.createElement(Q,null,"The BTC fees earned by this operator."))),l.a.createElement("th",null,l.a.createElement($,{fieldId:"totalETHRewards",state:e.sortState},"ETH Earnings ",l.a.createElement(Q,null,"The ETH fees earned by this operator."))),l.a.createElement("th",null,l.a.createElement($,{fieldId:"totalFaultCount",state:e.sortState},"Faults ",l.a.createElement(Q,null,"How often this operator was involved in a signing group with improper behaviour. If two numbers, the first one counts how often this operator can be blamed for the fault."))),l.a.createElement("th",null,l.a.createElement($,{fieldId:"stakedAt",state:e.sortState},"Staked At ",l.a.createElement(Q,null,"The date this operator joined based on having stake delegated to it."))),l.a.createElement("th",null,l.a.createElement($,{fieldId:"stakedropRewardWeight",state:e.sortState},"Reward Share ",l.a.createElement(Q,null,"Share of Stakedrop rewards going to this operator."))))),l.a.createElement("tbody",null,e.loading?l.a.createElement(ke,{columns:10}):null,null===t||void 0===t?void 0:t.operators.map((function(e){var r=parseFloat(e.unboundAvailable),o=r+parseFloat(e.bonded),i=parseFloat(e.bonded),c=(null===a||void 0===a?void 0:a.val)?r/1.5*3*a.val:null;return l.a.createElement("tr",{key:e.id},l.a.createElement("td",null,l.a.createElement(U,{address:e.address,to:"/operator/".concat(e.address)}),l.a.createElement("a",{title:"Open on Etherscan",href:"https://".concat(n,"/address/").concat(e.address),className:Object(p.a)(Re||(Re=Object(s.a)(["\n                font-size: 0.8em;\n                padding-left: 0.2em;\n               "])))},l.a.createElement(f,null))),l.a.createElement("td",null,e.activeKeepCount,l.a.createElement("span",{style:{color:"gray",fontSize:"0.8em"}}," / ",e.totalKeepCount)),l.a.createElement("td",null,l.a.createElement("span",{style:{color:"gray",fontSize:"0.8em"}},"ETH")," ",Ke.format(i)," ",o>0?l.a.createElement("span",{style:{color:"gray",fontSize:"0.8em"}},"(",Ke.format(i/o*100),"%)"):null),l.a.createElement("td",null,l.a.createElement("span",{style:{color:"gray",fontSize:"0.8em"}},"ETH")," ",Ke.format(r)," ",null!=c&&r?l.a.createElement("span",{style:{color:"gray",fontSize:"0.8em"}},"~",Ze.format(c)," BTC"):null),l.a.createElement("td",null,l.a.createElement("span",{style:{color:"gray",fontSize:"0.8em"}},"KEEP")," ",Ke.format(e.stakedAmount)),l.a.createElement("td",null,l.a.createElement("span",{style:{color:"gray",fontSize:"0.8em"}},"TBTC")," ",_e.format(se(e.totalTBTCRewards))),l.a.createElement("td",null,l.a.createElement("span",{style:{color:"gray",fontSize:"0.8em"}},"ETH")," ",Ze.format(ce(e.totalETHRewards))),l.a.createElement("td",null,e.attributableFaultCount>0?l.a.createElement(l.a.Fragment,null,e.attributableFaultCount," / "):null,e.totalFaultCount||""),l.a.createElement("td",null,l.a.createElement(ve,{time:e.stakedAt})),l.a.createElement("td",null,Ie(parseFloat(e.stakedropRewardWeight)/parseFloat(t.status.totalRewardWeight))))}))))}var Je=n(19);function Xe(e){return e/1e8}var Ve,$e=Object(u.gql)(Ve||(Ve=Object(s.a)(["\n    fragment NiceStateLabel on Deposit {\n        currentState,\n        bondedECDSAKeep {\n            publicKey\n        },\n        depositSetup {\n            failureReason\n        },\n        currentStateTimesOutAt,\n        updatedAt\n    }\n"])));function et(e){if(e.currentStateTimesOutAt){var t=ge(e.updatedAt),n=ge(e.currentStateTimesOutAt),a=n.diff(t,["seconds"]).seconds,r=n.diffNow(["seconds"]).seconds;return{remaining:r,total:a,percentage:Math.min(1-r/a,1)}}}function tt(e,t){var n=z(),a=Object(r.useState)(n?null:et(e)),l=Object(c.a)(a,2),o=l[0],i=l[1];return function(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return null===(e=n.current)||void 0===e?void 0:e.call.apply(e,[n].concat(a))}),t);return function(){return clearInterval(e)}}}),[t])}((function(){i(et(e))}),n?null:1e3*(null!==t&&void 0!==t?t:.8)),o}function nt(e){var t,n=e.currentState,a=e.depositSetup,r=(null===a||void 0===a?void 0:a.failureReason)||"";return"AWAITING_SIGNER_SETUP"==n&&(null===(t=e.bondedECDSAKeep)||void 0===t?void 0:t.publicKey)?"Awaiting Funding":"FAILED_SETUP"==n&&r?{FUNDING_TIMEOUT:"Funding Timeout",SIGNER_SETUP_FAILED_DEPOSITOR:"Funding Timeout",SIGNER_SETUP_FAILED:"Signer Setup Failed"}[r]||"Setup Failed":{AWAITING_SIGNER_SETUP:"Awaiting Signer Setup",AWAITING_BTC_FUNDING_PROOF:"Awaiting Funding Proof",AWAITING_WITHDRAWAL_SIGNATURE:"Awaiting Withdrawal Signature",AWAITING_WITHDRAWAL_PROOF:"Awaiting Withdrawal Proof",REDEEMED:"Redeemed",ACTIVE:"Active",COURTESY_CALL:"Courtesy Called",FAILED_SETUP:"Setup Failed",LIQUIDATED:"Liquidated",LIQUIDATION_IN_PROGRESS:"Liquidation In Progress"}[n||""]||n}function at(e){var t={AWAITING_SIGNER_SETUP:"#ffb74d",AWAITING_BTC_FUNDING_PROOF:"#ffb74d",AWAITING_WITHDRAWAL_SIGNATURE:"#ffb74d",AWAITING_WITHDRAWAL_PROOF:"#ffb74d",REDEEMED:"silver",ACTIVE:"#4caf50",COURTESY_CALL:"#ff9730",FAILED_SETUP:"transparent",LIQUIDATED:"#F44336",LIQUIDATION_IN_PROGRESS:"#ffcdd2"}[e]||"transparent";return{backgroundColor:t,border:"1px solid ".concat({FAILED_SETUP:"#F44336",LIQUIDATION_IN_PROGRESS:"#F44336"}[e]||t)}}function rt(e){return{REDEEMED:"The original BTC have been released, and the deposit is now closed.",LIQUIDATION_IN_PROGRESS:"The funds backing this deposit are being auctioned off."}[e]||""}var lt,ot,it,ct,st=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 56 56"},e,{ref:t}),r.createElement("circle",{cx:28,cy:28,r:25.5,stroke:"#0A0806",fill:"white",strokeWidth:5}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26 26h-8v4h8v10h4V30h8v-4H26z",fill:"#0A0806"}),r.createElement("circle",{cx:28,cy:19,r:3,fill:"#0A0806"}))})),ut=new Intl.NumberFormat("en-US",{style:"percent",maximumFractionDigits:2});function dt(e,t){var n=parseInt(e.bondedECDSAKeep.totalBondAmount);return t*parseInt(e.lotSizeSatoshis)/n*Math.pow(10,10)}function mt(e){var t=e.deposit,n=t.finalBtcPrice?oe(t.finalBtcPrice):e.price,a=!!t.finalBtcPrice;if(!n)return l.a.createElement("span",null,"-");var r=parseInt(t.bondedECDSAKeep.totalBondAmount)/(parseInt(t.lotSizeSatoshis)*n.weiPerSat),o=100*r,i="normal";o<t.undercollateralizedThresholdPercent&&(i="courtesy"),o<t.severelyUndercollateralizedThresholdPercent&&(i="undercollaterized");var c=a?null:{normal:e.highlightNormal?"green":void 0,courtesy:"orange",undercollaterized:"red"}[i],s=!e.highlightNormal&&"normal"==i||a?{fontSize:"0.9em",color:"gray"}:{};return l.a.createElement("span",{style:Object(b.a)(Object(b.a)({color:c},s),e.style)},ut.format(r))}var pt=new Intl.NumberFormat("en-US",{maximumFractionDigits:2}),Et=Object(u.gql)(lt||(lt=Object(s.a)(["\n    query GetOperatorKeeps($id: ID!, $orderBy: BondedECDSAKeep_orderBy, $orderDirection: OrderDirection, $block: Block_height) {\n        operator(id: $id, block: $block) {\n            keeps(first: 1000, orderBy: $orderBy, orderDirection: $orderDirection) {\n                id,\n                # TODO: How much is bonded in this keep for this operator?\n                totalBondAmount,\n                stakedropRewardStatus,\n                stakedropInterval { number }\n                deposit {\n                    id,\n                    contractAddress,\n                    lotSizeSatoshis,\n                    currentState,\n                    keepAddress,\n                    createdAt,\n                    tdtToken {\n                        owner\n                    },\n                    finalBtcPrice\n\n                    undercollateralizedThresholdPercent,\n                    severelyUndercollateralizedThresholdPercent,\n\n                    # Should take it from the parent intead.\n                    bondedECDSAKeep {\n                        id,\n                        totalBondAmount\n                    },\n\n                    ...NiceStateLabel\n                }\n            }\n        }\n    }\n\n    ","\n"])),$e);function ht(e){var t,n=Object(G.b)(),a=Object(c.a)(n,2),r=a[0],o=a[1],i=le(),u=T(),d=V("createdAt"),m=B(Et,{variables:{id:e.operatorId,orderBy:d.column,orderDirection:d.direction}}),E=m.loading,h=m.error,b=m.data;if(h)return l.a.createElement("p",null,"Error :( ",""+h);var g=null===b||void 0===b||null===(t=b.operator)||void 0===t?void 0:t.keeps;return l.a.createElement(l.a.Fragment,null,l.a.createElement(G.a,{singleton:r,delay:500}),l.a.createElement(X,{style:{width:"100%"}},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement($,{fieldId:"createdAt",state:d},"Created")),l.a.createElement("th",null,"Contract ",l.a.createElement(Q,null,"Every deposit is represented on-chain by a contract.")),l.a.createElement("th",null,"Lot Size"),l.a.createElement("th",null,"State"),l.a.createElement("th",null,l.a.createElement($,{fieldId:"etcToBtcRatio",state:d},"C-Ratio ",l.a.createElement(Q,null,"The current collateralization ratio, or for completed deposits, the ratio at the time of completion."))),l.a.createElement("th",null,l.a.createElement($,{fieldId:"totalBondAmount",state:d},"Bond")),l.a.createElement("th",null,"Stakedrop"))),l.a.createElement("tbody",null,E?l.a.createElement(ke,{columns:7}):null,null===g||void 0===g?void 0:g.map((function(e){var t,n=e.deposit;return l.a.createElement("tr",{key:n.id},l.a.createElement("td",null,l.a.createElement(ve,{time:n.createdAt})),l.a.createElement("td",null,l.a.createElement(R,{to:"/deposit/".concat(n.contractAddress)},n.contractAddress),l.a.createElement("a",{title:"Open on Etherscan",href:"https://".concat(u,"/address/").concat(n.contractAddress),className:Object(p.a)(ot||(ot=Object(s.a)(["\n                font-size: 0.8em;\n                padding-left: 0.2em;\n               "])))},l.a.createElement(f,null))),l.a.createElement("td",null,l.a.createElement("span",{style:{color:"gray",fontSize:"0.8em"}},"BTC"),"\xa0",Xe(null!==(t=n.lotSizeSatoshis)&&void 0!==t?t:0)),l.a.createElement("td",{className:Object(p.a)(it||(it=Object(s.a)(["\n            display: flex;\n            align-items: center;\n          "])))},l.a.createElement("div",{className:Object(p.a)(ct||(ct=Object(s.a)(["\n              display: inline-block;\n              width: 1.2em;\n              height: 1.2em;\n              border-radius: 2px;\n              padding: 0.2em;\n              box-sizing: border-box;\n            "]))),style:at(n.currentState)}),"\xa0",v(n.tdtToken.owner,n.currentState)?l.a.createElement(l.a.Fragment,null,l.a.createElement(G.a,{content:"TBTC was minted",singleton:o},l.a.createElement(st,null)),"\xa0"):"",nt(n)),l.a.createElement("td",null,l.a.createElement(mt,{deposit:n,price:i,highlightNormal:!0})),l.a.createElement("td",null,l.a.createElement("span",{style:{color:"gray",fontSize:"0.8em"}},"ETH")," ",pt.format(ce(e.totalBondAmount/3))),l.a.createElement("td",null,l.a.createElement(gt,{status:e.stakedropRewardStatus,target:o})))})))))}var bt={INELIGABLE:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjBweCIgeT0iMHB4Igp3aWR0aD0iMzIiIGhlaWdodD0iMzIiCnZpZXdCb3g9IjAgMCA1MTIgNTEyIgpzdHlsZT0iIGZpbGw6IzAwMDAwMDsiPjxwYXRoIGZpbGw9IiNFMDRGNUYiIGQ9Ik01MDQuMSwyNTZDNTA0LjEsMTE5LDM5Myw3LjksMjU2LDcuOUMxMTksNy45LDcuOSwxMTksNy45LDI1NkM3LjksMzkzLDExOSw1MDQuMSwyNTYsNTA0LjFDMzkzLDUwNC4xLDUwNC4xLDM5Myw1MDQuMSwyNTZ6Ij48L3BhdGg+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTI4NSwyNTZsNzIuNS04NC4yYzcuOS05LjIsNi45LTIzLTIuMy0zMWMtOS4yLTcuOS0yMy02LjktMzAuOSwyLjNMMjU2LDIyMi40bC02OC4yLTc5LjJjLTcuOS05LjItMjEuOC0xMC4yLTMxLTIuM2MtOS4yLDcuOS0xMC4yLDIxLjgtMi4zLDMxTDIyNywyNTZsLTcyLjUsODQuMmMtNy45LDkuMi02LjksMjMsMi4zLDMxYzQuMSwzLjYsOS4yLDUuMywxNC4zLDUuM2M2LjIsMCwxMi4zLTIuNiwxNi42LTcuNmw2OC4yLTc5LjJsNjguMiw3OS4yYzQuMyw1LDEwLjUsNy42LDE2LjYsNy42YzUuMSwwLDEwLjItMS43LDE0LjMtNS4zYzkuMi03LjksMTAuMi0yMS44LDIuMy0zMUwyODUsMjU2eiI+PC9wYXRoPjwvc3ZnPg==",TERMINATION_REPORTED:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjBweCIgeT0iMHB4Igp3aWR0aD0iMzIiIGhlaWdodD0iMzIiCnZpZXdCb3g9IjAgMCAxNzIgMTcyIgpzdHlsZT0iIGZpbGw6IzAwMDAwMDsiPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIHN0cm9rZS1saW5lY2FwPSJidXR0IiBzdHJva2UtbGluZWpvaW49Im1pdGVyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1kYXNoYXJyYXk9IiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjAiIGZvbnQtZmFtaWx5PSJub25lIiBmb250LXdlaWdodD0ibm9uZSIgZm9udC1zaXplPSJub25lIiB0ZXh0LWFuY2hvcj0ibm9uZSIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBub3JtYWwiPjxwYXRoIGQ9Ik0wLDE3MnYtMTcyaDE3MnYxNzJ6IiBmaWxsPSJub25lIj48L3BhdGg+PGc+PHBhdGggZD0iTTE2OS4zNDYwOSw4NmMwLC00Ni4wMjM0NCAtMzcuMzIyNjYsLTgzLjM0NjA5IC04My4zNDYwOSwtODMuMzQ2MDljLTQ2LjAyMzQ0LDAgLTgzLjM0NjA5LDM3LjMyMjY2IC04My4zNDYwOSw4My4zNDYwOWMwLDQ2LjAyMzQ0IDM3LjMyMjY2LDgzLjM0NjA5IDgzLjM0NjA5LDgzLjM0NjA5YzQ2LjAyMzQ0LDAgODMuMzQ2MDksLTM3LjMyMjY2IDgzLjM0NjA5LC04My4zNDYwOXoiIGZpbGw9IiNjY2NjY2MiPjwvcGF0aD48cGF0aCBkPSJNOTUuNzQyMTksODZsMjQuMzU1NDcsLTI4LjI4NTk0YzIuNjUzOTEsLTMuMDkwNjIgMi4zMTc5NywtNy43MjY1NiAtMC43NzI2NiwtMTAuNDE0MDZjLTMuMDkwNjMsLTIuNjUzOTEgLTcuNzI2NTYsLTIuMzE3OTcgLTEwLjM4MDQ3LDAuNzcyNjZsLTIyLjk0NDUzLDI2LjYzOTg0bC0yMi45MTA5NCwtMjYuNjA2MjVjLTIuNjUzOTEsLTMuMDkwNjIgLTcuMzIzNDQsLTMuNDI2NTYgLTEwLjQxNDA2LC0wLjc3MjY2Yy0zLjA5MDYyLDIuNjUzOTEgLTMuNDI2NTYsNy4zMjM0NCAtMC43NzI2NiwxMC40MTQwNmwyNC4zNTU0NywyOC4yNTIzNGwtMjQuMzU1NDcsMjguMjg1OTRjLTIuNjUzOTEsMy4wOTA2MiAtMi4zMTc5Nyw3LjcyNjU2IDAuNzcyNjYsMTAuNDE0MDZjMS4zNzczNCwxLjIwOTM3IDMuMDkwNjIsMS43ODA0NyA0LjgwMzkxLDEuNzgwNDdjMi4wODI4MSwwIDQuMTMyMDMsLTAuODczNDQgNS41NzY1NiwtMi41NTMxM2wyMi45MTA5NCwtMjYuNjA2MjVsMjIuOTEwOTQsMjYuNjA2MjVjMS40NDQ1MywxLjY3OTY5IDMuNTI3MzQsMi41NTMxMyA1LjU3NjU2LDIuNTUzMTNjMS43MTMyOCwwIDMuNDI2NTYsLTAuNTcxMDkgNC44MDM5MSwtMS43ODA0N2MzLjA5MDYzLC0yLjY1MzkxIDMuNDI2NTYsLTcuMzIzNDQgMC43NzI2NiwtMTAuNDE0MDZ6IiBmaWxsPSIjZmZmZmZmIj48L3BhdGg+PC9nPjwvZz48L3N2Zz4=",DISPENSED:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjBweCIgeT0iMHB4Igp3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIKdmlld0JveD0iMCAwIDE3MiAxNzIiCnN0eWxlPSIgZmlsbDojMDAwMDAwOyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJub256ZXJvIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iIiBzdHJva2UtZGFzaG9mZnNldD0iMCIgZm9udC1mYW1pbHk9Im5vbmUiIGZvbnQtd2VpZ2h0PSJub25lIiBmb250LXNpemU9Im5vbmUiIHRleHQtYW5jaG9yPSJub25lIiBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6IG5vcm1hbCI+PHBhdGggZD0iTTAsMTcydi0xNzJoMTcydjE3MnoiIGZpbGw9Im5vbmUiPjwvcGF0aD48Zz48cGF0aCBkPSJNMTY5LjM0NjA5LDg2YzAsLTQ2LjAyMzQ0IC0zNy4zMjI2NiwtODMuMzQ2MDkgLTgzLjM0NjA5LC04My4zNDYwOWMtNDYuMDIzNDQsMCAtODMuMzQ2MDksMzcuMzIyNjYgLTgzLjM0NjA5LDgzLjM0NjA5YzAsNDYuMDIzNDQgMzcuMzIyNjYsODMuMzQ2MDkgODMuMzQ2MDksODMuMzQ2MDljNDYuMDIzNDQsMCA4My4zNDYwOSwtMzcuMzIyNjYgODMuMzQ2MDksLTgzLjM0NjA5eiIgZmlsbD0iI2NjY2NjYyI+PC9wYXRoPjxwYXRoIGQ9Ik0xMzEuODg5MDYsNTguMDgzNTljLTEuOTQ4NDQsLTUuMDcyNjYgLTUuOTQ2MDksLTQuMjY2NDEgLTEwLjI3OTY5LC0zLjM5Mjk3Yy0yLjU4NjcyLDAuNTM3NSAtMTQuMTA5MzcsMy44OTY4NyAtMzIuMjgzNTksMjMuMTEyNWMtNy41NTg1OSw3Ljk2MTcyIC0xMi41MzA0NywxNC4zMTA5NCAtMTUuODIyNjYsMTkuMTQ4NDRjLTIuMDE1NjIsLTIuNDUyMzQgLTQuMywtNS4xMDYyNSAtNi43MTg3NSwtNy40OTE0MWMtNy40MjQyMiwtNy40MjQyMiAtMTUuNzIxODcsLTEyLjUzMDQ3IC0xNi4wNTc4MSwtMTIuNzMyMDNjLTMuNDYwMTYsLTIuMTE2NDEgLTcuOTk1MzEsLTEuMDQxNDEgLTEwLjE0NTMxLDIuNDUyMzRjLTIuMTE2NDEsMy40NjAxNiAtMS4wNDE0MSw3Ljk5NTMxIDIuNDE4NzUsMTAuMTQ1MzFjMC4wNjcxOSwwLjAzMzU5IDcuMTg5MDYsNC40MzQzOCAxMy4zMDMxMywxMC41ODIwM2M2LjI0ODQ0LDYuMjQ4NDQgMTEuOTI1NzgsMTQuNzE0MDYgMTEuOTkyOTcsMTQuODE0ODRjMS4zNzczNCwyLjA4MjgxIDMuNjk1MzEsMy4yOTIxOSA2LjE0NzY2LDMuMjkyMTljMC40MDMxMiwwIDAuODM5ODQsLTAuMDMzNTkgMS4yNzY1NiwtMC4xMDA3OGMyLjg4OTA2LC0wLjUwMzkxIDUuMTczNDQsLTIuNjUzOTEgNS44Nzg5MSwtNS40NzU3OGMwLjAzMzU5LC0wLjA2NzE5IDIuOTU2MjUsLTguMTYzMjggMTguMzc1NzgsLTI0LjQyMjY2YzEyLjQyOTY5LC0xMy4xMzUxNiAyMC43MjczNCwtMTcuMzAwNzggMjMuNjE2NDEsLTE4LjQ0Mjk3YzAuMDMzNTksMCAwLjAzMzU5LDAgMC4xMDA3OCwwYzAsMCAwLjEwMDc4LC0wLjAzMzU5IDAuMjY4NzUsLTAuMTM0MzhjMC41MDM5MSwtMC4yMDE1NiAwLjc3MjY2LC0wLjI2ODc1IDAuNzcyNjYsLTAuMjY4NzVjLTAuMTM0MzcsMC4wMzM1OSAtMC4yMDE1NiwwLjAzMzU5IC0wLjIwMTU2LDAuMDMzNTl2LTAuMDMzNTljMS4zNDM3NSwtMC41NzEwOSAzLjgyOTY5LC0xLjY0NjA5IDMuODYzMjgsLTEuNjc5NjljMy43Mjg5MSwtMS42MTI1IDQuOTcxODcsLTUuNjQzNzUgMy40OTM3NSwtOS40MDYyNXoiIGZpbGw9IiNmZmZmZmYiPjwvcGF0aD48L2c+PC9nPjwvc3ZnPg==",WITHDRAWABLE:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjBweCIgeT0iMHB4Igp3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIKdmlld0JveD0iMCAwIDE3MiAxNzIiCnN0eWxlPSIgZmlsbDojMDAwMDAwOyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJub256ZXJvIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iIiBzdHJva2UtZGFzaG9mZnNldD0iMCIgZm9udC1mYW1pbHk9Im5vbmUiIGZvbnQtd2VpZ2h0PSJub25lIiBmb250LXNpemU9Im5vbmUiIHRleHQtYW5jaG9yPSJub25lIiBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6IG5vcm1hbCI+PHBhdGggZD0iTTAsMTcydi0xNzJoMTcydjE3MnoiIGZpbGw9Im5vbmUiPjwvcGF0aD48Zz48cGF0aCBkPSJNMTY5LjM0NjA5LDg2YzAsLTQ2LjAyMzQ0IC0zNy4zMjI2NiwtODMuMzQ2MDkgLTgzLjM0NjA5LC04My4zNDYwOWMtNDYuMDIzNDQsMCAtODMuMzQ2MDksMzcuMzIyNjYgLTgzLjM0NjA5LDgzLjM0NjA5YzAsNDYuMDIzNDQgMzcuMzIyNjYsODMuMzQ2MDkgODMuMzQ2MDksODMuMzQ2MDljNDYuMDIzNDQsMCA4My4zNDYwOSwtMzcuMzIyNjYgODMuMzQ2MDksLTgzLjM0NjA5eiIgZmlsbD0iIzIzYWU1YSI+PC9wYXRoPjxwYXRoIGQ9Ik0xMzEuODg5MDYsNTguMDgzNTljLTEuOTQ4NDQsLTUuMDcyNjYgLTUuOTQ2MDksLTQuMjY2NDEgLTEwLjI3OTY5LC0zLjM5Mjk3Yy0yLjU4NjcyLDAuNTM3NSAtMTQuMTA5MzcsMy44OTY4NyAtMzIuMjgzNTksMjMuMTEyNWMtNy41NTg1OSw3Ljk2MTcyIC0xMi41MzA0NywxNC4zMTA5NCAtMTUuODIyNjYsMTkuMTQ4NDRjLTIuMDE1NjIsLTIuNDUyMzQgLTQuMywtNS4xMDYyNSAtNi43MTg3NSwtNy40OTE0MWMtNy40MjQyMiwtNy40MjQyMiAtMTUuNzIxODcsLTEyLjUzMDQ3IC0xNi4wNTc4MSwtMTIuNzMyMDNjLTMuNDYwMTYsLTIuMTE2NDEgLTcuOTk1MzEsLTEuMDQxNDEgLTEwLjE0NTMxLDIuNDUyMzRjLTIuMTE2NDEsMy40NjAxNiAtMS4wNDE0MSw3Ljk5NTMxIDIuNDE4NzUsMTAuMTQ1MzFjMC4wNjcxOSwwLjAzMzU5IDcuMTg5MDYsNC40MzQzOCAxMy4zMDMxMywxMC41ODIwM2M2LjI0ODQ0LDYuMjQ4NDQgMTEuOTI1NzgsMTQuNzE0MDYgMTEuOTkyOTcsMTQuODE0ODRjMS4zNzczNCwyLjA4MjgxIDMuNjk1MzEsMy4yOTIxOSA2LjE0NzY2LDMuMjkyMTljMC40MDMxMiwwIDAuODM5ODQsLTAuMDMzNTkgMS4yNzY1NiwtMC4xMDA3OGMyLjg4OTA2LC0wLjUwMzkxIDUuMTczNDQsLTIuNjUzOTEgNS44Nzg5MSwtNS40NzU3OGMwLjAzMzU5LC0wLjA2NzE5IDIuOTU2MjUsLTguMTYzMjggMTguMzc1NzgsLTI0LjQyMjY2YzEyLjQyOTY5LC0xMy4xMzUxNiAyMC43MjczNCwtMTcuMzAwNzggMjMuNjE2NDEsLTE4LjQ0Mjk3YzAuMDMzNTksMCAwLjAzMzU5LDAgMC4xMDA3OCwwYzAsMCAwLjEwMDc4LC0wLjAzMzU5IDAuMjY4NzUsLTAuMTM0MzhjMC41MDM5MSwtMC4yMDE1NiAwLjc3MjY2LC0wLjI2ODc1IDAuNzcyNjYsLTAuMjY4NzVjLTAuMTM0MzcsMC4wMzM1OSAtMC4yMDE1NiwwLjAzMzU5IC0wLjIwMTU2LDAuMDMzNTl2LTAuMDMzNTljMS4zNDM3NSwtMC41NzEwOSAzLjgyOTY5LC0xLjY0NjA5IDMuODYzMjgsLTEuNjc5NjljMy43Mjg5MSwtMS42MTI1IDQuOTcxODcsLTUuNjQzNzUgMy40OTM3NSwtOS40MDYyNXoiIGZpbGw9IiNmZmZmZmYiPjwvcGF0aD48L2c+PC9nPjwvc3ZnPg=="},ft={INELIGABLE:"There is no reward for this keep, but it needs to be notified to have the reward allocation added back into the pool for future intervals.",TERMINATION_REPORTED:"There is no reward for this keep, and the amount initially allocated for it has been transferred back into the pool.",DISPENSED:"The reward for this keep has been dispensed (but may not have been withdrawn).",WITHDRAWABLE:"The reward for this keep has not yet been dispensed."};function gt(e){var t=bt[e.status];return t?l.a.createElement(G.a,{content:ft[e.status],singleton:e.target},l.a.createElement("img",{style:{width:14,height:14},src:t})):null}var vt=n(122);function wt(e){return Object(vt.c)({dictionaries:[vt.b,vt.a],separator:" ",seed:parseInt(e.slice(0,12),16)})}function Mt(e){var t,n,a;t=void 0!==e.wei?e.wei:e.eth*Math.pow(10,18),"eth"===e.unit?(n=1e18,a=void 0):(n=1e9,a=0);var r=t/n,o=new Intl.NumberFormat("en-US",{maximumFractionDigits:a});return l.a.createElement(l.a.Fragment,null,o.format(r))}function yt(e){var t=e.memberships;return l.a.createElement(X,{style:{width:"100%"}},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Group"),l.a.createElement("th",null,"Weight ",l.a.createElement(Q,null,"An operator can fill multiple membership slots in a group, and will then earn a multiple of rewards.")),l.a.createElement("th",null,"ETH Earned ",l.a.createElement(Q,null,"ETH earned by the operator through membership in the group.")),l.a.createElement("th",null,"Created At"))),l.a.createElement("tbody",null,t.map((function(e){var t=e.group;return l.a.createElement("tr",{key:t.id},l.a.createElement("td",null,l.a.createElement(Y,{hash:t.pubKey,to:"/group/".concat(t.id)},wt(t.id))),l.a.createElement("td",null,e.count),l.a.createElement("td",null,l.a.createElement(Se,null)," ",l.a.createElement(Mt,{unit:"eth",wei:e.reward})),l.a.createElement("td",null,l.a.createElement(ve,{time:t.createdAt})))}))))}Mt.defaultProps={unit:"eth"};var jt,Tt,Dt,kt,Nt=new Intl.NumberFormat("en-US",{maximumFractionDigits:0});function Lt(e){var t;return t="raw"in e?e.raw/Math.pow(10,18):e.keep,l.a.createElement(l.a.Fragment,null,Nt.format(t))}function At(e){return l.a.createElement(G.a,{trigger:"click",hideOnClick:!0,arrow:!1,interactive:!0,maxWidth:600,className:Object(p.a)(jt||(jt=Object(s.a)(["\n              background-color: transparent !important;\n              padding: 0;\n              color: inherit;\n            "]))),placement:"bottom",content:l.a.createElement(E,{style:{padding:"10px"}},e.children)},l.a.createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAAW0lEQVRIie2Ruw2AMAwFTykyu5mD2RKmQFCQ6imiSALVO8mSP+fGBmPML2RgAypQgGi9ZU4Al0TI8pRTO4NDloed1BLllHrYScDeGWhvysk8tyq8P3CFY4z5ghvPEDu0rDRS9gAAAABJRU5ErkJggg==",width:14,height:14,style:{cursor:"pointer"}}))}function It(e){return l.a.createElement("div",{style:{marginBottom:"0.2em"}},l.a.createElement("strong",null,e.children))}function xt(e){var t=e.event,n=e.Components[t.__typename]||St;return l.a.createElement("div",{className:Object(p.a)(Tt||(Tt=Object(s.a)(["\n    &:not(:last-child) {\n       margin-bottom: 20px;\n       border-bottom: 1px dotted silver;\n       padding-bottom: 20px;\n    }     \n   "])))},l.a.createElement("div",{className:Object(p.a)(Dt||(Dt=Object(s.a)(["    \n      font-size: 0.85em;\n      margin-bottom: 0.4em;\n      color: gray;\n    "])))},l.a.createElement(ve,{time:t.timestamp})," @ ",l.a.createElement(F,{tx:t.transactionHash})," by ",l.a.createElement(U,{address:t.submitter})),l.a.createElement("div",null,l.a.createElement(n,{event:t})))}function St(e){return l.a.createElement("div",null,"Unknown Event: ",e.event.__typename)}var Ot=Object(u.gql)(kt||(kt=Object(s.a)(["\n    query GetOperatorLog($id: String!, $orderBy: BondedECDSAKeep_orderBy, $orderDirection: OrderDirection, $block: Block_height) {\n        events(where: {operator: $id}, orderBy: timestamp, orderDirection: desc, block: $block) {\n            __typename,\n            id,\n            transactionHash,\n            submitter,\n            timestamp,\n            \n            ... on UnbondedValueDepositedEvent {\n                amount,\n                beneficiary\n            },\n\n            ... on UnbondedValueWithdrawnEvent {\n                amount,\n                beneficiary\n            },\n            \n            ... on BondSeizedEvent {\n                amount,\n                destination,\n                referenceId\n            },\n            \n            ...on TokensSeizedEvent {\n                amount\n            },\n\n            ...on TopUpInitiatedEvent {\n                amount\n            }\n\n            ...on TopUpCompletedEvent {\n                newAmount\n            },\n            ...on OperatorAuthorizationEvent {\n                authorizationType,\n                isDeauthorization\n            }\n        }\n    }\n\n    ","\n"])),$e);function Ct(e){var t=V("createdAt"),n=B(Ot,{variables:{id:e.operatorId,orderBy:t.column,orderDirection:t.direction}}),a=n.loading,r=n.error,o=n.data;return a?l.a.createElement("p",null,"Loading..."):r||!o?l.a.createElement("p",null,"Error :( ",""+r):l.a.createElement("div",null,null===o||void 0===o?void 0:o.events.map((function(e,t){return l.a.createElement(xt,{key:e.id,event:e,Components:Rt})})))}var zt,Bt,Rt={UnbondedValueDepositedEvent:function(e){return l.a.createElement("div",null,l.a.createElement(It,null,"ETH Collateral Deposited"),l.a.createElement("div",null,l.a.createElement(Mt,{wei:e.event.amount})," ETH of additional collateral was deposited."))},UnbondedValueWithdrawnEvent:function(e){return l.a.createElement("div",null,l.a.createElement(It,null,"ETH Collateral Withdrawn"),l.a.createElement("div",null,l.a.createElement(Mt,{wei:e.event.amount})," ETH of collateral was withdrawn."))},BondSeizedEvent:function(e){return l.a.createElement("div",null,l.a.createElement(It,null,"Bond Seized"),l.a.createElement("div",null,l.a.createElement(Mt,{wei:e.event.amount})," ETH of bonded collateral was seized by the system (and sent to ",l.a.createElement(U,{address:e.event.destination}),")."))},TokenGrantStakedEvent:function(e){return l.a.createElement("div",null,l.a.createElement(It,null,"Token Grant Staked"))},TokensSeizedEvent:function(e){return l.a.createElement("div",null,l.a.createElement(It,null,"Tokens Seized"),l.a.createElement("div",null,Nt.format(e.event.amount/Math.pow(10,18))," KEEP were seized."))},TopUpInitiatedEvent:function(e){return l.a.createElement("div",null,l.a.createElement(It,null,"Topup initiated"),l.a.createElement("div",null,"A topup of ",Nt.format(e.event.amount/Math.pow(10,18))," KEEP was initiated."))},TopUpCompletedEvent:function(e){return l.a.createElement("div",null,l.a.createElement(It,null,"Topup Completed"),l.a.createElement("div",null,"The topup completed. The total amount staked is now ",Nt.format(e.event.newAmount/Math.pow(10,18))," KEEP."))},UndelegatedEvent:function(e){return l.a.createElement("div",null,l.a.createElement(It,null,"Undelegated"))},OperatorStakedEvent:function(e){return l.a.createElement("div",null,l.a.createElement(It,null,"Staked"))},OperatorAuthorizationEvent:function(e){return l.a.createElement("div",null,l.a.createElement(It,null,"Contract ",e.event.isDeauthorization?"Deauthorized":"Authorized"),l.a.createElement("div",null,"The ",e.event.authorizationType," contract has been ",e.event.isDeauthorization?"deauthorized":"authorized","."))}};function Ut(e){var t,n=(t=e.data).length&&t[0]&&"properties"in t[0]?e.data:[{title:"",properties:e.data}];return l.a.createElement("table",{style:e.style,className:Object(p.a)(zt||(zt=Object(s.a)(["\n      color: #0A0806;\n      \n      & td, th {\n        font-weight: normal;\n        padding: 5px;\n        text-align: left;\n        vertical-align: top;\n      }\n      \n      tbody.indented th:first-child {\n        padding-left: 20px;\n      }\n    "])))},n.map((function(e){var t=e.properties.map((function(e){return e?l.a.createElement("tr",{key:e.key},l.a.createElement("th",null,e.label," ",e.tooltip?l.a.createElement(Q,null,e.tooltip):null),l.a.createElement("td",null,e.value)):null}));return l.a.createElement(r.Fragment,{key:e.title},e.title?l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",{style:{fontWeight:"bold"},colSpan:2},e.title))):null,l.a.createElement("tbody",{className:e.title?"indented":""},t))})))}var Pt,Ft,Yt=Object(u.gql)(Bt||(Bt=Object(s.a)(['\n    query GetOperatorData($id: ID!, $block: Block_height) {\n      operator(id: $id) {\n        id,\n        address,\n        owner,\n        beneficiary,\n        authorizer,\n        \n        stakedAmount,\n        ethLocked,\n        stakedAt,\n        stakeLockExpiresAt,\n        \n        randomBeaconOperatorAuthorized,\n        bondedECDSAKeepFactoryAuthorized,\n        tbtcSystemSortitionPoolAuthorized,\n        \n        stakedropEthScore,\n        stakedropBoost,\n        stakedropRewardWeight\n      },\n      \n      status: statusRecord(id: "current") {\n        totalRewardWeight\n      }       \n    }\n'])));function Gt(e){var t=e.operatorId,n=B(Yt,{variables:{id:e.operatorId}}),a=n.loading,r=n.error,o=n.data;if(a)return l.a.createElement("p",null,"Loading...");if(r||!o)return l.a.createElement("p",null,"Error :( ",""+r);var i=o.operator,c=o.status;return l.a.createElement(E,{padding:!0},l.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},l.a.createElement("div",{style:{flex:1}},l.a.createElement(Ut,{data:[{title:"Stake",properties:[{key:"amountstaked",label:"Stake",tooltip:"Amount of KEEP staked by this operator. A larger keep stake means the operator will be selected for work more frequently.",value:l.a.createElement(l.a.Fragment,null,l.a.createElement(Oe,null)," ",Nt.format(i.stakedAmount))},{key:"dateStaked",label:"Date",tooltip:"When KEEP was originally staked for this operator.",value:l.a.createElement(Me,{format:"full",time:i.stakedAt})},{key:"stakeLockedUntil",label:"Locked Until",tooltip:"The stake can only be withdrawn after this date. This date will change when keeps are redeemed early. Note that there is a two-month undelegation period in any case.",value:i.stakeLockExpiresAt&&"0"!=i.stakeLockExpiresAt?l.a.createElement(Me,{format:"full",time:i.stakeLockExpiresAt}):l.a.createElement(l.a.Fragment,null,"Not Locked")}]},{title:"ETH",properties:[{key:"ethLocked",label:"ETH Locked",value:l.a.createElement(Mt,{eth:i.ethLocked})}]},{title:"Roles",properties:[{key:"address",label:"Node",tooltip:"The address running the node server.",value:l.a.createElement(U,{address:i.address})},{key:"owner",label:"Owner",tooltip:"Assigns roles, stakes KEEP and provides ETH for bonding.",value:l.a.createElement(U,{address:i.owner})},{key:"beneficiary",label:"Beneficiary",tooltip:"Receives earnings and rewards.",value:l.a.createElement(U,{address:i.beneficiary})},{key:"authorizer",label:"Authorizer",tooltip:"Can authorize new contracts.",value:l.a.createElement(U,{address:i.authorizer})}]},{title:"Authorizations",properties:[{key:"randomBeacon",label:"Random Beacon",value:i.randomBeaconOperatorAuthorized?"Yes":"No"},{key:"ecdsa",label:"ECDSA Factory",value:i.bondedECDSAKeepFactoryAuthorized?"Yes":"No"},{key:"tbtc",label:"TBTC System",value:i.tbtcSystemSortitionPoolAuthorized?"Yes":"No"}]},{title:"Stakedrop",properties:[{key:"ethScore",label:"ETH Score",tooltip:"Based on the amount of ETH provided to the system.",value:Ae(i.stakedropEthScore)},{key:"bost",label:"Boost",tooltip:"The boost is based on the amount of staked KEEP, and increases the reward weight.",value:Ae(i.stakedropBoost)},{key:"rewardWeight",label:"Reward Weight",tooltip:"The reward weight represents this operator's share of the total rewards.",value:Ae(i.stakedropRewardWeight)},{key:"rewardWeightShare",label:"Reward Share",tooltip:"The share of rewards going to this operator.",value:Ie(parseFloat(i.stakedropRewardWeight)/parseFloat(c.totalRewardWeight))}]}]})),l.a.createElement("div",{style:{flex:1}},l.a.createElement("h3",{style:{marginTop:0}},"Log"),l.a.createElement(Ct,{operatorId:t}))))}var Wt=Object(u.gql)(Pt||(Pt=Object(s.a)(["\n    query GetOperator($id: ID!, $block: Block_height) {\n        operator(id: $id, block: $block) {\n            id,\n            address,\n            bonded,\n            unboundAvailable,\n            stakedAmount,\n            totalFaultCount,\n            attributableFaultCount,\n            totalTBTCRewards,\n            beaconGroupMemberships(orderBy: groupCreatedAt, orderDirection: desc) {\n                count,\n                reward,\n                group {\n                    id,\n                    pubKey,\n                    createdAt,\n                }\n            },\n            stakedropRewardsDispensed,\n            stakedropECDSARewardsDispensed,\n            stakedropBeaconRewardsDispensed\n        }\n    }\n"])));function Qt(){return l.a.createElement("div",{className:Object(p.a)(Ft||(Ft=Object(s.a)(["\n      padding: 1em;\n    "])))},l.a.createElement(_.a,null,l.a.createElement("title",null,"Operator")),l.a.createElement(Kt,null))}var Ht=new Intl.NumberFormat("en-US",{maximumFractionDigits:2}),Zt=new Intl.NumberFormat("en-US",{maximumFractionDigits:6});function Kt(){var e=Object(m.i)(),t=e.operatorId,n=e.tabId;t=t.toLowerCase();var a=Object(m.g)(),o=T(),i=B(Wt,{variables:{id:t}}),c=i.loading,s=i.error,u=i.data,d=["","keeps","beacongroups"],p=Object(r.useMemo)((function(){var e=d.indexOf(n);return-1==e?0:e}),[n]);if(c)return l.a.createElement("p",null,"Loading...");if(s||!u)return l.a.createElement("p",null,"Error :( ",""+s);var h=u.operator;if(!h)return l.a.createElement("p",null,"No such operator.");var b=parseFloat(h.unboundAvailable)+parseFloat(h.bonded),f=parseFloat(h.bonded);return l.a.createElement("div",null,l.a.createElement(Te,{label:l.a.createElement(Y,{hash:h.address}),subtitle:"Operator",buttons:l.a.createElement(At,null,l.a.createElement("div",null,l.a.createElement("a",{href:"https://".concat(o,"/address/").concat(h.address)},"Open in Etherscan")))},l.a.createElement(je,null,l.a.createElement(ie,{label:"bonded"},l.a.createElement("div",null,Ht.format(h.bonded)," ETH"),b>0?l.a.createElement("div",{style:{fontSize:"20px",color:"gray"}},Ht.format(f/b*100),"% of ",Ht.format(b)," ETH"):null),l.a.createElement(ie,{label:"available to bond"},l.a.createElement("div",null,Ht.format(h.unboundAvailable)," ETH")),l.a.createElement(ie,{label:"staked"},l.a.createElement("div",null,Ht.format(h.stakedAmount)," KEEP")),l.a.createElement(ie,{label:"faults",tooltip:"How often this operator was involved in a signing group with improper behaviour. If two numbers, the first one counts how often this operator can be blamed for the fault."},l.a.createElement("div",null,h.attributableFaultCount>0?l.a.createElement(l.a.Fragment,null,h.attributableFaultCount," / "):null,h.totalFaultCount)),l.a.createElement(ie,{label:"fees"},l.a.createElement("div",null,Zt.format(se(h.totalTBTCRewards))," TBTC")),l.a.createElement(ie,{label:"rewards dispensed",tooltip:"Stakedrop awards which have already been dispensed to this operator (whether withdrawn or not)."},l.a.createElement("div",null,Nt.format(h.stakedropRewardsDispensed/Math.pow(10,18))," KEEP")))),l.a.createElement(Je.d,{selectedIndex:p,onSelect:function(e){var n=d[e];a.replace("/operator/".concat(t,"/").concat(n))}},l.a.createElement(Je.b,null,l.a.createElement(Je.a,null,"Overview"),l.a.createElement(Je.a,null,"Keeps"),l.a.createElement(Je.a,null,"Beacon Groups")),l.a.createElement(Je.c,null,l.a.createElement(Gt,{operatorId:t})),l.a.createElement(Je.c,null,l.a.createElement(E,{padding:!0},l.a.createElement("h3",{style:{marginTop:0}},"Keeps"),l.a.createElement(ht,{operatorId:t}))),l.a.createElement(Je.c,null,l.a.createElement(E,{padding:!0},l.a.createElement("h3",{style:{marginTop:0}},"Random Beacon Groups"),l.a.createElement(yt,{memberships:h.beaconGroupMemberships})))))}var _t=n(40),qt=n(118);_t.a.setElectrumConfig({server:"electrumx-server.tbtc.network",port:8443,protocol:"wss"});var Jt={refCount:0,state:"disconnected",client:null,connectingPromise:null};function Xt(){return(Xt=Object(Fe.a)(Pe.a.mark((function e(){return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Jt.scheduledDisconnect&&window.clearTimeout(Jt.scheduledDisconnect),Jt.client){e.next=5;break}if(null!==_t.a.electrumConfig){e.next=4;break}throw new Error("Electrum client not configured.");case 4:Jt.client=new qt.a(_t.a.electrumConfig);case 5:if(Jt.refCount+=1,"disconnected"===Jt.state&&(Jt.state="connecting",Jt.connectingPromise=Jt.client.connect()),"connecting"!==Jt.state){e.next=11;break}return e.next=10,Jt.connectingPromise;case 10:"connecting"===Jt.state&&(Jt.state="connected");case 11:return e.abrupt("return",Jt.client);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vt(){var e=Object(r.useState)(null),t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){return function(){return Xt.apply(this,arguments)}().then((function(e){a(e)})),function(){Jt.refCount-=1,0==Jt.refCount&&(Jt.scheduledDisconnect=window.setTimeout((function(){var e;null===(e=Jt.client)||void 0===e||e.close(),Jt.state="disconnected",Jt.scheduledDisconnect=void 0}),1e4))}}),[]),n}function $t(e,t,n){var a=Vt(),l=z(),o=Object(r.useState)(""),i=Object(c.a)(o,2),s=i[0],u=i[1],d=Object(r.useState)(!1),m=Object(c.a)(d,2),p=m[0],E=m[1],h=Object(r.useState)(0),b=Object(c.a)(h,2),f=b[0],g=b[1],v="string"===typeof t?parseInt(t):t,w=Object(r.useCallback)(function(){var t=Object(Fe.a)(Pe.a.mark((function t(n){var r,l;return Pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_t.a.Transaction.findWithClient(a,e,v);case 2:if(r=t.sent,!n.set){t.next=5;break}return t.abrupt("return");case 5:if(r){t.next=10;break}return E(!0),t.next=9,_t.a.Transaction.findOrWaitFor(a,e,v);case 9:r=t.sent;case 10:if(!n.set){t.next=12;break}return t.abrupt("return");case 12:return u(r.transactionID),t.next=15,_t.a.Transaction.checkForConfirmations(a,r.transactionID,0);case 15:if(l=t.sent,!n.set){t.next=18;break}return t.abrupt("return");case 18:return g(l),E(!0),t.abrupt("return",_t.a.Transaction.waitForConfirmations(a,r.transactionID,6,(function(e){e.transactionID;var t=e.confirmations;e.requiredConfirmations;g(t)})));case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,v,g,u,a]);return Object(r.useEffect)((function(){if(e&&v&&n&&a&&!l){var t={set:!1,unsubscribe:null};return w(t).then((function(e){t.unsubscribe=e})),function(){t.set=!0,t.unsubscribe&&t.unsubscribe()}}}),[e,v,a,n,l]),p?{hasTransaction:!!s,transactionHash:s,numConfirmations:f}:null}function en(e){return e?_t.a.Address.publicKeyToP2WPKHAddress(e.slice(2),"main"):""}var tn,nn,an=function(e){var t=e.className,n=Object(L.a)(e,["className"]);return l.a.createElement("svg",Object.assign({width:"1em",height:"1em",stroke:"black",viewBox:"0 0 38 38",className:"svg-loaders-svg".concat(t?" ".concat(t):"")},n),l.a.createElement("g",{transform:"translate(1 1)",strokeWidth:2,fill:"none",fillRule:"evenodd"},l.a.createElement("circle",{strokeOpacity:.5,cx:18,cy:18,r:18}),l.a.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},l.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"}))))},rn=n(297);function ln(e){var t,n=Object(r.useCallback)((function(t){e.onClick&&(t.preventDefault(),e.onClick())}),[e.onClick]),a={};e.to?(t="a",a.href=e.to):t="button";var o=16,i=1;return"small"===e.size?o=13:"tiny"===e.size&&(o=11,i=.8),l.a.createElement(t,Object.assign({className:Object(p.a)(tn||(tn=Object(s.a)(["\n    display: flex;\n    flex-direction: row;\n    align-items: flex-start;\n    outline: none;\n    display: inline-block;\n    text-decoration: none;\n    &:visited {\n      color: inherit;\n    }\n    &:hover {\n      text-decoration: none;\n    }\n    cursor: pointer;\n    \n    font-family: Work Sans;\n    font-weight: 500;    \n    line-height: 1.2;\n        \n    background: #FFFFFF;    \n    border: 1px solid #0A0806;    \n    color: #0A0806;\n\n    text-transform: uppercase;\n    \n    position: relative;\n    &::after {\n      content: '';\n      position: absolute;\n      height: 5px;\n      background: #0A0806;\n      bottom: 0px;\n      left: 0px;\n      right: 0px;\n      display: none;\n    }    \n    &:hover {\n      border-bottom-color: #0A0806;\n      ::after {\n        background: #0A0806;\n        display: block;      \n      }\n    }\n    &:active{\n      border-bottom-color: #48DBB4;\n      ::after {\n        background: #48DBB4;\n        display: block;      \n      }\n    }\n    \n    font-size: ","px;\n    padding: ","em ","em;\n  "])),o,.9*i,1.2*i)},a,{onClick:n}),e.children)}var on=Object(u.gql)(nn||(nn=Object(s.a)(["\n    fragment AuctionDetails on Deposit {\n        initialCollateralizedPercent,\n        depositLiquidation {\n            liquidationInitiated,\n            liquidatedAt\n        },\n        bondedECDSAKeep {\n            totalBondAmount\n        }\n    }\n"])));function cn(e){var t,n;return function(e){var t=((null===e||void 0===e?void 0:e.endDate)?ge(e.endDate):fe.DateTime.utc()).diff(ge(e.liquidationInitiated)).as("seconds"),n=e.bondValue;if(t>86400)return{value:n,percentage:100};var a=Math.floor(1e4/e.initialCollateralizedPercent),r=a+Math.floor((100-a)*t/86400);return{percentage:r,value:n*r/100,nextValue:100==r?null:n*(r+1)/100}}({initialCollateralizedPercent:e.initialCollateralizedPercent,liquidationInitiated:e.depositLiquidation.liquidationInitiated,bondValue:null===(t=e.bondedECDSAKeep)||void 0===t?void 0:t.totalBondAmount,endDate:null===(n=e.depositLiquidation)||void 0===n?void 0:n.liquidatedAt})}var sn;function un(e){var t=B(Object(u.gql)(sn||(sn=Object(s.a)(["\n      query GetDepositLogs($depositId: String!, $block: Block_height)\n      {\n          events(where: {deposit: $depositId}, orderBy: timestamp, orderDirection: desc, block: $block) {\n              __typename,\n              id,\n              transactionHash,\n              submitter,\n              timestamp,\n\n              ...on RegisteredPubKeyEvent {\n                  signingGroupPubkeyX,\n                  signingGroupPubkeyY\n              }\n              \n              ...on StartedLiquidationEvent {\n                  cause\n              },\n\n              ...on RedemptionRequestedEvent {\n                  redeemerOutputScript,\n                  requestedFee\n              },\n\n              ...on LiquidatedEvent {\n                  deposit {\n                      ...AuctionDetails\n                  }\n              },\n\n              ...on SetupFailedEvent {\n                  reason,\n                  deposit {\n                      bondedECDSAKeep {\n                          pubkeySubmissions { address },\n                          members { address }\n                      }\n                  }\n              }\n          }\n      }\n      \n      ","\n  "])),on),{variables:{depositId:e.depositId}}),n=t.loading,a=t.error,r=t.data;return n?l.a.createElement("p",null,"Loading..."):a?l.a.createElement("p",null,"Error :( ",""+a):l.a.createElement(l.a.Fragment,null,r.events.map((function(e){return l.a.createElement(xt,{key:e.id,event:e,Components:En})})))}var dn,mn,pn,En={CreatedEvent:function(e){return l.a.createElement("div",null,l.a.createElement(It,null,"Deposit created"),l.a.createElement("div",null,l.a.createElement(U,{address:e.event.submitter})," created a new deposit."),l.a.createElement("div",{style:{color:"gray",fontSize:"0.9em",marginTop:"7px"}},"A random group of nodes (called the signers) will now be selected to collateralize and hold the Bitcoin."))},RegisteredPubKeyEvent:function(e){var t=e.event,n=_t.a.Address.publicKeyPointToP2WPKHAddress(t.signingGroupPubkeyX,t.signingGroupPubkeyY,"main");return l.a.createElement("div",null,l.a.createElement(It,null,"Bitcoin address provided"),l.a.createElement("div",null,"Signers have provided a Bitcoin address to receive the funds: ",l.a.createElement(P,{address:n})),l.a.createElement("div",{style:{color:"gray",fontSize:"0.9em",marginTop:"7px"}},"The depositor must now send the chosen amount of Bitcoin to this address, then provide proof that they did so."))},FundedEvent:function(e){return l.a.createElement("div",null,l.a.createElement(It,null,"Funded"),l.a.createElement("div",null,"Proof has been submitted that the Bitcoin have been sent to the address provided, and the deposit is now active."))},StartedLiquidationEvent:function(e){var t=e.event.cause,n=hn(t),a={FRAUD:"One of the signers submitted a fraudulent signature.",PROOF_TIMEOUT:"The signing group failed to submit proof that their transaction, releasing the deposited Bitcoin, was included in the blockchain.",SIGNATURE_TIMEOUT:"The signing group failed to provide a signature for a transaction releasing the Bitcoin.",UNDERCOLLATERIZED:"The deposit became undercollateralized due to the value of the backing ETH bond falling.",COURTESY_CALL_EXPIRED:"The deposit became undercollateralized due to the value of the backing ETH bond falling. It was courtesy called earlier, but the courtesy call expired."}[t];return l.a.createElement("div",null,l.a.createElement(It,null,"Liquidation Started: ",n),l.a.createElement("div",null,a),l.a.createElement("div",{style:{color:"gray",fontSize:"0.9em",marginTop:"7px"}},"The system now runs a falling-price auction, selling the ETH collateral backing the deposit."))},RedemptionRequestedEvent:function(e){var t=_t.a.Address.fromScript(e.event.redeemerOutputScript);return l.a.createElement("div",null,l.a.createElement(It,null,"Redemption Requested"),l.a.createElement("div",null,l.a.createElement(U,{address:e.event.submitter})," paid back the TBTC tokens to the system and is asking for the deposited bitcoin to be sent to ",l.a.createElement(P,{address:t}),"."))},GotRedemptionSignatureEvent:function(e){return l.a.createElement("div",null,l.a.createElement(It,null,"Signers provided a redemption signature"),l.a.createElement("div",null,"The signers provided a signature for the redemption Bitcoin transaction."))},RedeemedEvent:function(e){return l.a.createElement("div",null,l.a.createElement(It,null,"Redeemed"),l.a.createElement("div",null,"Proof was submitted that the signers have paid the held Bitcoin to the requested withdrawal address."))},SetupFailedEvent:function(e){var t;if("FUNDING_TIMEOUT"==e.event.reason||"SIGNER_SETUP_FAILED_DEPOSITOR"==e.event.reason)t=l.a.createElement(l.a.Fragment,null,l.a.createElement(It,null,"Failed: Not funded"),l.a.createElement("div",null,"The depositor did not send the required amount of Bitcoin to the deposit address, and the deposit has now timed out."));else if("SIGNER_SETUP_FAILED"==e.event.reason){var n=e.event.deposit.bondedECDSAKeep.members.map((function(e){return e.address})),a=new Set(e.event.deposit.bondedECDSAKeep.pubkeySubmissions.map((function(e){return e.address}))),r=n.filter((function(e){return!a.has(e)}));t=l.a.createElement(l.a.Fragment,null,l.a.createElement(It,null,"Failed: Signer Setup"),l.a.createElement("div",null,"The signers failed to coordinate to provide a Bitcoin deposit address. Specifically, nothing was submitted by the following signer(s): ",r.map((function(e){return l.a.createElement(U,{key:e,to:"/operator/".concat(e),address:e})})).reduce((function(e,t){return[e,", ",t]}))))}else t=l.a.createElement(l.a.Fragment,null,l.a.createElement(It,null,"Setup Failed"),l.a.createElement("div",null,"Reason: ",e.event.reason));return l.a.createElement("div",null,t)},LiquidatedEvent:function(e){var t=cn(e.event.deposit);return l.a.createElement("div",null,l.a.createElement(It,null,"Liquidated"),l.a.createElement("div",null,l.a.createElement(U,{address:e.event.submitter})," bought ",t.percentage,"% (",l.a.createElement(Mt,{wei:t.value})," ETH) of the collateral."))},CourtesyCalledEvent:function(e){return l.a.createElement("div",null,l.a.createElement(It,null,"Courtesy Call"),l.a.createElement("div",null,"The deposit has been notified that is undercollateralized."),l.a.createElement("div",{style:{color:"gray",fontSize:"0.9em",marginTop:"7px"}},"The value of the backing collateral has fallen, and now covers less than the required 125% of the Bitcoin deposited. Anyone is now able to start the redemption process. If the deposit is not redeemed within 6 hours, or regains the required collaterialization ratio, liquidation proceedings will be started."))},ExitedCourtesyCallEvent:function(e){return l.a.createElement("div",null,l.a.createElement(It,null,"Courtesy Call Exited"),l.a.createElement("div",null,"The deposit regained the required collaterialization ratio and is no longer in danger of being liquidated."))}};function hn(e){return{FRAUD:"Signer Fraud",PROOF_TIMEOUT:"Signer Timeout",SIGNATURE_TIMEOUT:"Signer Timeout",UNDERCOLLATERIZED:"Undercollaterialized",COURTESY_CALL_EXPIRED:"Undercollaterialized"}[e]||e}function bn(e){var t,n=e.deposit,a=k(),r=D(),o=en(n.bondedECDSAKeep.publicKey),i=!z()&&"AWAITING_BTC_FUNDING_PROOF"==n.currentState,c=$t(o,n.lotSizeSatoshis,i),u=tt(n);if(["LIQUIDATED","LIQUIDATION_IN_PROGRESS","FRAUD_LIQUIDATION_IN_PROGRESS"].indexOf(n.currentState)>-1)t=l.a.createElement("span",{style:{fontSize:20,flex:1,color:"gray"}},hn(n.depositLiquidation.cause));else if(i){var d,m;if(c)m=c.hasTransaction&&c.numConfirmations>=6?l.a.createElement(ln,{size:"tiny",to:"https://".concat(r,"/deposit/").concat(n.contractAddress,"/pay/confirming")},"Go to dApp"):void 0===u?null:(null!==(d=null===u||void 0===u?void 0:u.remaining)&&void 0!==d?d:0)>0?l.a.createElement("span",{style:{fontSize:20,flex:1,color:"gray",textAlign:"right"}},we(null===u||void 0===u?void 0:u.remaining)," ",l.a.createElement(Q,{size:.8},"When this timer reaches zero, anyone can close the deposit, returning the bonded funds to the signers.")):l.a.createElement(yn,{deposit:n}),t=l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{style:{fontSize:20,flex:1,color:"gray"}},c.hasTransaction?l.a.createElement(l.a.Fragment,null,null===c||void 0===c?void 0:c.numConfirmations," confirmations"):l.a.createElement(l.a.Fragment,null,"waiting for transaction"),l.a.createElement("a",{title:"Open on blockchain.com",href:c.transactionHash?"".concat(a,"/tx/").concat(c.transactionHash):"".concat(a,"/address/").concat(o),className:Object(p.a)(dn||(dn=Object(s.a)(["\n                font-size: 0.8em;\n                padding-left: 0.2em;\n             "])))},l.a.createElement(f,null)),l.a.createElement("span",{style:{fontSize:12,paddingLeft:5}},l.a.createElement(an,null))),m);else t=null}return l.a.createElement(ie,{label:"state"},l.a.createElement(fn,{progress:null===u||void 0===u?void 0:u.percentage},nt(n)," ",rt(n.currentState)?l.a.createElement("span",{className:Object(p.a)(mn||(mn=Object(s.a)(["position: relative; top: -0.5em; font-size: 0.6em;"])))},l.a.createElement(Q,null,rt(n.currentState))):null),v(n.tdtToken.owner,n.currentState)?l.a.createElement("div",{className:Object(p.a)(pn||(pn=Object(s.a)(["\n                  font-size: 0.6em;\n                  display: flex;\n                  flex-direction: row;\n                  align-items: center;\n              "])))},l.a.createElement(st,null)," ",l.a.createElement("span",{style:{paddingLeft:5}},"TBTC minted")):null,l.a.createElement("div",{style:{lineHeight:1,alignItems:"center",display:"flex",flexDirection:"row",marginTop:"5px"}},t))}function fn(e){if(void 0===e.progress)return e.children;var t="";return t=e.singleColor?e.singleColor:e.progress<=.5?"#d3f7ce":e.progress<=.8?"#f7e4ce":"#f7cece",l.a.createElement("div",{style:{position:"relative",zIndex:1,backgroundColor:"whitesmoke"}},e.children,l.a.createElement("div",{style:{position:"absolute",backgroundColor:t,left:0,top:0,bottom:0,width:"".concat(100*e.progress,"%"),zIndex:-4}}))}var gn,vn,wn,Mn=["function notifyFundingTimedOut()","function notifySignerSetupFailed()"];function yn(e){var t,a=z(),o=Object(rn.h)(),i=e.deposit,s=Object(r.useState)(!1),u=Object(c.a)(s,2),d=u[0],m=u[1];if(a)return null;if("AWAITING_SIGNER_SETUP"==i.currentState){var p;if(t="notifySignerSetupFailed",null===i||void 0===i||null===(p=i.bondedECDSAKeep)||void 0===p?void 0:p.publicKey)return null}else{if("AWAITING_BTC_FUNDING_PROOF"!=i.currentState)return null;t="notifyFundingTimedOut"}return l.a.createElement(ln,{size:"tiny",onClick:Object(Fe.a)(Pe.a.mark((function e(){var a,r,l,c,s;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,Promise.all([n.e(0),n.e(2)]).then(n.bind(null,298));case 4:return a=e.sent,e.next=7,o.connect("injected");case 7:return r=new a.providers.Web3Provider(window.ethereum),l=new a.Contract(i.contractAddress,Mn,r),c=l.connect(r.getSigner()),e.next=12,c[t]({gasLimit:593800});case 12:return s=e.sent,e.next=15,s.wait();case 15:e.sent;case 16:return e.prev=16,m(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,,16,19]])})))},"Notify Timeout ",d?l.a.createElement(an,null):l.a.createElement(Q,null,"If the deposit process was not completed in time. Notifying the contract of this will release the bonded funds back to the signers."))}function jn(e){var t=e.query,n=(t.loading,t.error),a=t.dateColumn,r=t.sortState,o=t.data,i=Object(G.b)(),s=Object(c.a)(i,2),u=s[0],d=s[1],m=le(),p=T();if(n)return l.a.createElement("p",null,"Error :( ",""+n);var E="updatedAt"==a?"Updated":"redemptionStartedAt"==a?"Started":"Created",h="updatedAt"==a?"When this deposit last changed state, during the funding, redemption or liquidation processes.":"redemptionStartedAt"==a?"When the redemption process, or liquidation, started.":"When this deposit was created.";return l.a.createElement(l.a.Fragment,null,l.a.createElement(G.a,{singleton:u,delay:500}),l.a.createElement(X,{style:{width:"100%"}},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement($,{fieldId:a,state:r},E," ",l.a.createElement(Q,null,h))),l.a.createElement("th",null,"Contract ",l.a.createElement(Q,null,"Every deposit is represented on-chain by a contract.")),l.a.createElement("th",null,l.a.createElement($,{fieldId:"lotSizeSatoshis",state:r},"Lot Size")),l.a.createElement("th",null,"State"),l.a.createElement("th",null,l.a.createElement($,{fieldId:"etcToBtcRatio",state:r},"C-Ratio ",l.a.createElement(Q,null,"The current collateralization ratio, or for completed deposits, the ratio at the time of completion."))),l.a.createElement("th",null,"Actor ",l.a.createElement(Q,null,"Either the creator of the redeemer, depending on the current process of the deposit.")))),l.a.createElement("tbody",null,e.query.loading?l.a.createElement(ke,{columns:6}):null,null===o||void 0===o?void 0:o.deposits.map((function(e){return l.a.createElement(Dn,{deposit:e,key:e.id,dateColumn:a,etherscan:p,price:m,target:d})})))))}var Tn,Dn=l.a.memo((function(e){var t,n=e.deposit,a=e.dateColumn,r=e.etherscan,o=e.price,i=e.target;return l.a.createElement("tr",{key:n.id},l.a.createElement("td",null,l.a.createElement(ve,{time:n[a]})),l.a.createElement("td",null,l.a.createElement(U,{address:n.contractAddress,to:"/deposit/".concat(n.contractAddress)}),l.a.createElement("a",{title:"Open on Etherscan",href:"https://".concat(r,"/address/").concat(n.contractAddress),className:Object(p.a)(gn||(gn=Object(s.a)(["\n                font-size: 0.8em;\n                padding-left: 0.2em;\n               "])))},l.a.createElement(f,null))),l.a.createElement("td",null,l.a.createElement(xe,null),"\xa0",Xe(null!==(t=n.lotSizeSatoshis)&&void 0!==t?t:0)),l.a.createElement("td",{className:Object(p.a)(vn||(vn=Object(s.a)(["\n            display: flex;\n            align-items: center;\n          "])))},l.a.createElement("div",{className:Object(p.a)(wn||(wn=Object(s.a)(["\n              display: inline-block;\n              width: 1.2em;\n              height: 1.2em;\n              border-radius: 2px;\n              padding: 0.2em;\n              box-sizing: border-box;\n            "]))),style:at(n.currentState)}),"\xa0",v(n.tdtToken.owner,n.currentState)?l.a.createElement(l.a.Fragment,null,l.a.createElement(G.a,{content:"TBTC was minted",singleton:i},l.a.createElement(st,null)),"\xa0"):"",l.a.createElement(kn,{deposit:n}),l.a.createElement(Nn,{deposit:n})),l.a.createElement("td",null,l.a.createElement(mt,{deposit:n,price:o})),l.a.createElement("td",null,l.a.createElement(U,{address:n.lastActor})))}));function kn(e){var t=tt(e.deposit,5);return l.a.createElement(fn,{progress:null===t||void 0===t?void 0:t.percentage},nt(e.deposit))}function Nn(e){var t,n=en(e.deposit.bondedECDSAKeep.publicKey),a=!!n&&"AWAITING_BTC_FUNDING_PROOF"==e.deposit.currentState,r=$t(n,null!==(t=e.deposit.lotSizeSatoshis)&&void 0!==t?t:0,a);return a?l.a.createElement(l.a.Fragment,null,(null===r||void 0===r?void 0:r.hasTransaction)?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{style:{color:"silver",fontSize:".8em",paddingLeft:"5px"}},"(",r.numConfirmations,"/6)")):null):null}var Ln,An,In,xn,Sn,On,Cn=[{id:"",label:"All Deposits",description:"All deposits managed by the system.",title:"Deposits",action:"make"},{id:"operations",label:"Deposit Operations",description:"Bitcoins entering the system.",action:"make"},{id:"redemptions",label:"Redemption Operations",description:"Bitcoins being taken out of the system."},{id:"liquidations",label:"Liquidations & Signer Misbehaviour",description:"The interesting stuff."},{id:"redeemable",label:"Redeemable",description:"Deposits available for redemption by anyone."},{id:"unminted",label:"Unminted TDTs",description:"Deposits which custody Bitcoin, but no TBTC has been minted."},{id:"notifiable",label:"Notifiable Deposits",description:"Deposits whose current state has timed out and can be notified."}],zn=Object(u.gql)(Tn||(Tn=Object(s.a)(['\n    query GetDeposits(\n        $where: Deposit_filter, $orderBy: Deposit_orderBy, $skip: Int, \n        $block: Block_height, $orderDirection: OrderDirection,\n        $perPage: Int\n    ) {\n        deposits(\n            first: $perPage,\n            skip: $skip,\n            orderBy: $orderBy,\n            orderDirection: $orderDirection\n            where: $where,\n            block: $block\n        ) {\n            id,\n            contractAddress,\n            lotSizeSatoshis,\n            currentState,\n            keepAddress,\n            updatedAt,\n            createdAt,\n            redemptionStartedAt,\n            currentStateTimesOutAt,\n            creator,\n            lastActor,\n            finalBtcPrice,\n\n            tdtToken {\n                owner\n            }\n\n            undercollateralizedThresholdPercent,\n            severelyUndercollateralizedThresholdPercent,\n            bondedECDSAKeep {\n                id,\n                totalBondAmount,\n                publicKey\n            }\n\n            ...NiceStateLabel\n        }\n        stats: statsRecord(id: "current", block: $block) {\n            depositCount\n        }\n    }\n\n    ',"\n"])),$e);function Bn(e){var t=e.pagination,n=t.items,a=t.set,r=t.hasNext,o=t.current;return 1!=o||r?l.a.createElement("div",{className:Object(p.a)(Ln||(Ln=Object(s.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  "])))},n.map((function(e){return e.number==o?l.a.createElement("div",{className:Object(p.a)(An||(An=Object(s.a)(["\n          display: flex;\n          flex-direction: row;\n          align-items: flex-start;\n          outline: none;\n          display: inline-block;\n          text-decoration: none;\n          cursor: pointer;          \n          font-family: Work Sans;\n          font-weight: 500;    \n          line-height: 1.2;\n              \n          background: #0A0806;    \n          border: 1px solid #0A0806;    \n          color: white;\n\n          font-size: ","px;\n          padding: ","em ","em;\n        "])),11,.9*.8,.96)},e.number):l.a.createElement(Rn,{onClick:a,current:o,page:e.number})})),r?l.a.createElement(l.a.Fragment,null,l.a.createElement(Rn,{onClick:a,current:o,page:o+1}),l.a.createElement("div",{style:{marginLeft:"5px"}},"...")):null):null}function Rn(e){return l.a.createElement("div",{style:{margin:"0 2px"}},l.a.createElement(ln,{size:"tiny",onClick:function(){return e.onClick(e.page)}},e.page))}var Un,Pn,Fn,Yn,Gn,Wn,Qn,Hn,Zn;function Kn(e){return l.a.createElement(R,{onClick:e.onClick,to:e.to,className:Object(p.a)(In||(In=Object(s.a)(["\n    -webkit-column-break-inside: avoid;\n    page-break-inside: avoid;\n         break-inside: avoid;\n         \n    padding: 10px;\n    min-width: 250px;\n        \n    display: inline-block;\n    & strong {}\n    & em {\n      font-size: 0.9em;\n      color: gray;\n      font-style: normal;\n    }\n    \n    cursor: pointer;\n    &:hover {\n      background-color: #f5f5f5;\n      text-decoration: none !important;\n    }\n  "])))},e.children)}function _n(){var e,t,n,a,o,i=Object(m.i)().view,u=D(),d=Object(r.useRef)(),h=Object(r.useState)(1),b=Object(c.a)(h,2),f=b[0],g=b[1],v=Cn.filter((function(e){return e.id===i}))[0]||Cn[0];Object(r.useEffect)((function(){g(1)}),[v]);var w=function(e,t){var n={"":{},active:{filter_activeLikeState:!0},liquidations:{filter_liquidationLikeOrSignerFailureState:!0},redeemable:{filter_redeemableAsOf_lt:Math.round(fe.DateTime.utc().toMillis()/1e3)},unminted:{filter_unmintedTDT:!0},notifiable:{currentStateTimesOutAt_lt:Math.round(fe.DateTime.utc().toMillis()/1e3)},redemptions:{redemptionStartedAt_not:null}}[e||""]||{},a={"":"updatedAt",operations:"createdAt",redemptions:"redemptionStartedAt"}[e||""]||"updatedAt",l=V(a),o=Object(r.useState)(!1),i=Object(c.a)(o,2),s=i[0],u=i[1];Object(r.useEffect)((function(){l.setColumn(a),l.setDirection("desc"),u(!0)}),[e,l.setColumn,l.setDirection]);var d=B(zn,{variables:{where:n,skip:200*((null!==t&&void 0!==t?t:1)-1),orderBy:l.column,orderDirection:l.direction,perPage:200},skip:!s});return{loading:d.loading||!s,error:d.error,data:d.data,dateColumn:a,view:e,sortState:l,perPage:200}}(v.id,f),M=function(e){for(var t=[],n=1;n<=e.pageNumber;n++)t.push({number:n});return{items:t,set:e.setPageNumber,hasNext:e.perPage<=e.numResults,current:e.pageNumber}}({pageNumber:f,setPageNumber:g,numResults:null===(e=w.data)||void 0===e?void 0:e.deposits.length,perPage:w.perPage});return l.a.createElement("div",{style:{padding:"20px"}},l.a.createElement(_.a,null,l.a.createElement("title",null,"Deposits")),l.a.createElement("div",{style:{marginBottom:"20px"}},l.a.createElement("div",{style:{display:"flex",alignItems:"center"}},l.a.createElement(G.a,{trigger:"click",hideOnClick:!0,arrow:!1,interactive:!0,maxWidth:600,className:Object(p.a)(xn||(xn=Object(s.a)(["\n          background-color: transparent !important;\n          padding: 0;\n          color: inherit;\n        "]))),onCreate:function(e){d.current=e},content:l.a.createElement(E,null,l.a.createElement("div",{className:Object(p.a)(Sn||(Sn=Object(s.a)(["\n              column-count: 2;\n              column-gap: 0;\n              display: inline-block;\n              padding: 10px;\n            "])))},Cn.map((function(e){return l.a.createElement(Kn,{to:"/deposits/".concat(e.id),onClick:function(){d.current.hide()}},l.a.createElement("div",null,l.a.createElement("strong",null,e.label)),l.a.createElement("div",null,l.a.createElement("em",null,e.description)))}))))},l.a.createElement("h1",{style:{marginTop:0,marginBottom:"0px",cursor:"pointer"},className:Object(p.a)(On||(On=Object(s.a)(["        \n          "])))},v.label," "," ",l.a.createElement("img",{alt:"svgImg",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjBweCIgeT0iMHB4Igp3aWR0aD0iMjQiIGhlaWdodD0iMjQiCnZpZXdCb3g9IjAgMCAyNCAyNCIKc3R5bGU9IiBmaWxsOiMwMDAwMDA7Ij48cGF0aCBkPSJNIDEyIDAgQyA1LjM3MTA5NCAwIDAgNS4zNzEwOTQgMCAxMiBDIDAgMTguNjI4OTA2IDUuMzcxMDk0IDI0IDEyIDI0IEMgMTguNjI4OTA2IDI0IDI0IDE4LjYyODkwNiAyNCAxMiBDIDI0IDUuMzcxMDk0IDE4LjYyODkwNiAwIDEyIDAgWiBNIDEyIDE4LjUgTCA2LjUgMTIgTCAxMCAxMiBMIDEwIDYgTCAxNCA2IEwgMTQgMTIgTCAxNy41IDEyIFoiPjwvcGF0aD48L3N2Zz4="}))),"make"===v.action?l.a.createElement("div",{style:{marginLeft:"30px"}},l.a.createElement(ln,{size:"tiny",to:"https://".concat(u,"/deposit")},"Make")):null),""==v.id?l.a.createElement("div",{style:{color:"gray",visibility:(null===(t=w.data)||void 0===t||null===(n=t.stats)||void 0===n?void 0:n.depositCount)?"visible":"hidden"}},null===(a=w.data)||void 0===a||null===(o=a.stats)||void 0===o?void 0:o.depositCount," deposits."):null),l.a.createElement(E,{padding:!0},l.a.createElement(jn,{query:w}),l.a.createElement("div",{style:{marginTop:"30px"}},l.a.createElement(Bn,{pagination:M}))))}var qn,Jn=Object(u.gql)(Un||(Un=Object(s.a)(["\n    query GetDeposit($id: ID!, $block: Block_height) {\n        deposit(id: $id, block: $block) {\n            id,\n            contractAddress,\n            currentState,\n            createdAt,\n            keepAddress,\n            lotSizeSatoshis,\n            endOfTerm,\n            index,\n\n            currentStateTimesOutAt,\n            \n            tdtToken {\n                id,\n                tokenID,\n                owner,\n                minter\n            }\n\n            initialCollateralizedPercent,\n            undercollateralizedThresholdPercent,\n            severelyUndercollateralizedThresholdPercent,\n            \n            bondedECDSAKeep {\n                id,\n                keepAddress,\n                totalBondAmount,\n                publicKey,\n                status,\n                honestThreshold,\n                members {\n                    id,\n                    address\n                }\n                pubkeySubmissions { address },\n            },\n            \n            depositLiquidation {\n                cause\n            }\n            \n            ...NiceStateLabel,\n            ...AuctionDetails\n        }\n    }\n  \n    ","\n    ","\n"])),$e,on),Xn=Object(u.gql)(Pn||(Pn=Object(s.a)(["\n    subscription WatchDeposit($id: ID!) {\n        deposit(id: $id) {\n            id\n            currentState\n        }\n    }\n"]))),Vn=new Intl.NumberFormat("en-US",{style:"percent",maximumFractionDigits:2});function $n(){return l.a.createElement("div",{className:Object(p.a)(Fn||(Fn=Object(s.a)(["\n      padding: 1em;\n    "])))},l.a.createElement(_.a,null,l.a.createElement("title",null,"Deposit")),l.a.createElement(ea,null))}function ea(){var e,t=Object(m.i)().depositId;"dp-"!=(t=t.toLowerCase()).slice(0,3)&&(t="dp-"+t);var n=B(Jn,{variables:{id:t,block:{number:11058393}}}),a=n.loading,r=n.error,o=n.data;!function(e,t){var n=C();Object(u.useSubscription)(e,Object(b.a)(Object(b.a)({},t),{},{skip:!!n}))}(Xn,{variables:{id:t}});var i=T(),c=(D(),le()),d=en(null===o||void 0===o||null===(e=o.deposit)||void 0===e?void 0:e.bondedECDSAKeep.publicKey);return a?l.a.createElement("p",null,"Loading..."):r?l.a.createElement("p",null,"Error :( ",""+r):o.deposit?l.a.createElement("div",null,l.a.createElement(Te,{label:"Deposit",subtitle:o.deposit.contractAddress,buttons:l.a.createElement(At,null,l.a.createElement("div",null,l.a.createElement("a",{href:"https://keepscan.com/deposits/".concat(o.deposit.contractAddress)},"Open in KeepScan")),l.a.createElement("div",null,l.a.createElement("a",{href:"https://tbtcdeposit.auction/#/liquidations/".concat(o.deposit.contractAddress)},"Open in Auction Tool")),l.a.createElement("div",null,l.a.createElement("a",{href:"https://tbtcexplorer.com/detail/".concat(o.deposit.contractAddress)},"Open in tBTCExplorer")),l.a.createElement("div",null,l.a.createElement("a",{href:"https://".concat(i,"/address/").concat(o.deposit.contractAddress)},"Find on Etherscan")))},l.a.createElement(je,null,l.a.createElement(ie,{label:"lot size"},Xe(o.deposit.lotSizeSatoshis)," BTC"),l.a.createElement(bn,{deposit:o.deposit}),l.a.createElement(ie,{label:"creation date"},l.a.createElement(ve,{time:o.deposit.createdAt})))),l.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginTop:"20px"}},l.a.createElement("div",{style:{marginRight:"20px",flex:1}},l.a.createElement(la,{deposit:o.deposit}),l.a.createElement(E,{style:{marginTop:"20px"}},l.a.createElement("div",{className:Object(p.a)(Yn||(Yn=Object(s.a)(["           \n            padding: 20px;\n          "])))},l.a.createElement(ta,{deposit:o.deposit}),l.a.createElement("h3",{style:{marginTop:0}},"Log"),l.a.createElement(un,{depositId:o.deposit.id})))),l.a.createElement("div",{style:{flex:1}},l.a.createElement(E,null,l.a.createElement("div",{className:Object(p.a)(Gn||(Gn=Object(s.a)(["\n            font-weight: bold;\n            padding: 20px;\n            padding-bottom: 0;\n          "])))},"Collateral ",l.a.createElement(Q,null,"The  BTC is custodied by a group of randomly chosen signing nodes which stake ETH as a security bond.")),l.a.createElement(Ut,{style:{padding:"15px"},data:[{key:"signers",label:"Signers",tooltip:"The node operators collectively holding the Bitcoin private key.",value:l.a.createElement("div",null,o.deposit.bondedECDSAKeep.members.map((function(e){return l.a.createElement("div",{key:e.address},l.a.createElement(U,{address:e.address,to:"/operator/".concat(e.address)}))})))},{key:"collateralization",label:"Collaterialization",tooltip:"If ETH loses value, the keep may become undercollaterized.",value:l.a.createElement(mt,{price:c,deposit:o.deposit,highlightNormal:!0,style:{fontWeight:"bold"}})},{key:"courtesyCallPrice",label:"Liquidation Price",tooltip:"If the price of ETH falls to the first level, a courtesy call can be initiated, if it falls to the second, the deposit can be liquidated.",value:l.a.createElement("div",null,dt(o.deposit,o.deposit.undercollateralizedThresholdPercent/100).toFixed(5)," BTC / "," ",dt(o.deposit,o.deposit.severelyUndercollateralizedThresholdPercent/100).toFixed(5)," BTC")},{key:"bondedAmount",label:"Bond",tooltip:"The total value the signers have bonded to guarantee this deposit.",value:l.a.createElement("span",null,ce(o.deposit.bondedECDSAKeep.totalBondAmount).toFixed(2)," ETH")},d?{key:"publicKey",label:"BTC Address",value:l.a.createElement(P,{address:d})}:void 0,{key:"thresholds",label:"Thresholds",tooltip:"The collateralization requirements for this deposit: Initial / Courtesy Call / Liquidation",value:l.a.createElement("span",null,Vn.format(o.deposit.initialCollateralizedPercent/100),l.a.createElement("span",{style:{color:"silver"}}," / "),Vn.format(o.deposit.undercollateralizedThresholdPercent/100),l.a.createElement("span",{style:{color:"silver"}}," / "),Vn.format(o.deposit.severelyUndercollateralizedThresholdPercent/100))},{key:"honestThreshold",label:"Honest Threshold",tooltip:"How many signers must be honest for the bond not be lost.",value:l.a.createElement("span",null,Vn.format(o.deposit.bondedECDSAKeep.honestThreshold/o.deposit.bondedECDSAKeep.members.length))}]})),l.a.createElement(E,{style:{marginTop:"20px"}},l.a.createElement(Ut,{style:{padding:"15px"},data:[{key:"tokenOwner",label:"Current Owner",tooltip:"Deposit owner as represented by ownership over the TDT token.",value:l.a.createElement(U,{address:o.deposit.tdtToken.owner})},{key:"tokenMinter",label:"Creator",tooltip:"Original creator of this deposit.",value:l.a.createElement(U,{address:o.deposit.tdtToken.minter})},{key:"tokenId",label:"Token ID",value:l.a.createElement(U,{address:o.deposit.tdtToken.tokenID,to:"https://".concat(i,"/token/").concat("0x10b66bd1e3b5a936b7f8dbc5976004311037cdf0","?a=").concat(o.deposit.tdtToken.tokenID)})},{key:"index",label:"Index",tooltip:"The number of the deposit, counting up since inception of the system.",value:o.deposit.index},o.deposit.endOfTerm?{key:"endOfTerm",label:"End Of Term",tooltip:"Within the term, only the owner can redeem the deposit or mint TBTC.",value:l.a.createElement(ve,{time:o.deposit.endOfTerm})}:void 0,{key:"depositContract",label:"Deposit Contract",value:l.a.createElement(U,{address:o.deposit.contractAddress})},{key:"keepContract",label:"Keep Contract",tooltip:"The Keep holds the original BTC in custody, and signers stake ETH as a security bond.",value:l.a.createElement(U,{address:o.deposit.keepAddress})},{key:"status",label:"Keep Status",value:o.deposit.bondedECDSAKeep.status}]}))))):l.a.createElement("p",null,"Not found.")}function ta(e){var t,n=e.deposit;return"AWAITING_BTC_FUNDING_PROOF"==n.currentState&&(t=aa),"AWAITING_SIGNER_SETUP"==n.currentState&&(t=n.bondedECDSAKeep.publicKey?na:ra),t?l.a.createElement("div",{style:{marginBottom:"20px"},className:Object(p.a)(Wn||(Wn=Object(s.a)(["\n    margin-bottom: 20px;\n    padding-left: 15px;\n    border-left: 1px solid #64c4aa;\n  "])))},l.a.createElement("div",{style:{marginTop:0,color:"#64c4aa",fontWeight:"bold",marginBottom:"10px"}},"What happens next?"),l.a.createElement(t,{deposit:n})):null}function na(e){return l.a.createElement("div",null,"The depositor must notify the contract that the signers have setup the Bitcoin deposit address, and that they want to continue the deposit process.")}function aa(e){return l.a.createElement("div",null,"The depositor must submit proof of having sent to Bitcoin to the deposit address, once at least 6 confirmations have been reached. ",l.a.createElement(ve,{time:e.deposit.currentStateTimesOutAt})," left to do so.")}function ra(e){var t=e.deposit.bondedECDSAKeep.members.map((function(e){return e.address})),n=new Set(e.deposit.bondedECDSAKeep.pubkeySubmissions.map((function(e){return e.address}))),a=t.filter((function(e){return!n.has(e)}));return l.a.createElement("div",null,l.a.createElement("p",null,"The signers chosen to back this deposit will lock up ETH collateral and then submit a Bitcoin deposit address."),l.a.createElement("p",null,e.deposit.bondedECDSAKeep.pubkeySubmissions.length,"/3 have done so. We are still waiting for "," ",a.map((function(e){return l.a.createElement(U,{key:e,to:"/operator/".concat(e),address:e})})).reduce((function(e,t){return[e,", ",t]})),"."))}function la(e){var t,n=e.deposit,a=T(),r=D(),o=["ACTIVE","COURTESY_CALL"].indexOf(n.currentState)>-1&&("COURTESY_CALL"==n.currentState||g(n.tdtToken.owner));return t="LIQUIDATION_IN_PROGRESS"===n.currentState?l.a.createElement(oa,{deposit:n}):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:Object(p.a)(Qn||(Qn=Object(s.a)(["\n      font-weight: bold;\n      margin-bottom: 0.5em;\n    "])))},"Ownership ",l.a.createElement(Q,null,"For every deposit, a non-fungible TDT Token is minted. Whoever owns this token, owns the deposit.")),l.a.createElement("div",{className:Object(p.a)(Hn||(Hn=Object(s.a)(["\n    "])))},v(n.tdtToken.owner,n.currentState)?l.a.createElement("div",null,"This deposit has been used to mint TBTC. The corresponding TDT token is now owned by the ",l.a.createElement("a",{href:"https://".concat(a,"/address/").concat("0x526c08E5532A9308b3fb33b7968eF78a5005d2AC")},"Vending Machine contract"),"."):n.tdtToken.owner==n.tdtToken.minter?l.a.createElement("div",null,"The TDT Token representing ownership over this deposit is owned by the original deposit creator, ",l.a.createElement(U,{address:n.tdtToken.owner}),"."):l.a.createElement("div",null,"The TDT Token representing ownership over this deposit is owned by ",l.a.createElement(U,{address:n.tdtToken.owner}),".")),l.a.createElement("div",{className:Object(p.a)(Zn||(Zn=Object(s.a)(["\n      font-size: 0.8em;\n      margin-top: 10px;\n      & a, a:visited {\n        color: gray;\n      }            \n    "])))},l.a.createElement("a",{href:"https://".concat(a,"/token/").concat("0x10b66bd1e3b5a936b7f8dbc5976004311037cdf0","?a=").concat(n.tdtToken.tokenID)},"TDT Token on Etherscan")),o?l.a.createElement("div",{style:{marginTop:20}},"This deposit can be redeemed by anyone, even non-owners. ",l.a.createElement(Q,null,"Because it is owned by the Vending Machine, has been courtesy called, or is at-term, anyone can exchange TBTC for the Bitcoin deposited here."),l.a.createElement("div",{style:{marginTop:"8px"}},l.a.createElement(ln,{size:"small",to:"https://".concat(r,"/deposit/").concat(n.contractAddress,"/redeem")},"Redeem"))):null),l.a.createElement(E,{padding:!0},t)}function oa(e){var t=cn(e.deposit);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,"This deposit is currently in liquidation. ",l.a.createElement(Mt,{wei:t.value})," ETH are on offer - ",t.percentage,"% of the total bond."))}var ia=l.a.forwardRef((function(e,t){var n,a=Object(m.h)().pathname==e.to;return l.a.createElement(R,{innerRef:t,to:null!==(n=e.to)&&void 0!==n?n:"",onClick:e.onClick,"data-active":a?"true":"",className:Object(p.a)(qn||(qn=Object(s.a)(["\n    padding: 0.5em;    \n               \n    font-size: 14px;\n    line-height: 22px;\n    text-decoration: none;\n    \n    align-items: center;\n    letter-spacing: 0.05em;\n    text-transform: uppercase;\n    color: #0A0806;\n \n    display: flex;\n    color: black !important;\n    \n    &:hover {\n      text-decoration: none;\n    }\n    \n    position: relative;\n    &:hover::after, &[data-active=true]::after {\n      content: '';\n      position: absolute;\n      height: 5px;\n      background: #48DBB4 /**#F4F4F4**/;\n      bottom: 0px;\n      left: 0px;\n      right: 0px;\n    }\n  "])))},e.children)}));n(283);function ca(){return l.a.createElement("div",{style:{padding:"20px"}},l.a.createElement(E,{padding:!0},l.a.createElement("h3",null,"The Idea"),l.a.createElement("p",null,"Provide insight into the workings of the Keep and tBTC systems - deposits, redemptions, who bonds for what, governance actions, etc. It does ",l.a.createElement("strong",null,"not")," desire to track ownership and transfers of the KEEP and TBTC tokens themselves - for that you may want to have a look at"," "," ",l.a.createElement("a",{href:"https://keep-explorer.herokuapp.com/"},"KeepExplorer")," or even"," "," ",l.a.createElement("a",{href:"https://etherscan.io/token/0x85eee30c52b0b379b046fb0f85f4f3dc3009afec"},"Etherscan"),"."),l.a.createElement("h3",null,"Code etc."),l.a.createElement("p",null,"The source code is available ",l.a.createElement("a",{href:"https://github.com/miracle2k/allthekeeps"},"on Github"),". The backend is provided by ",l.a.createElement("a",{href:"https://thegraph.com/"},"The Graph"),", and specifically"," "," ",l.a.createElement("a",{href:"https://thegraph.com/explorer/subgraph/miracle2k/keep-network"},"this subgraph"),". The graph is currently still evolving, and will likely change in backwards-incompatible ways. You can contribute to it"," "," ",l.a.createElement("a",{href:"https://github.com/miracle2k/allthekeeps-graph"},"on Github"),"."),l.a.createElement("p",null,l.a.createElement("a",{href:"https://github.com/miracle2k/keep-pricefeed"},"A second subgraph")," is providing the on-chain price feed."),l.a.createElement("p",null,"Built by ",l.a.createElement("a",{href:"http://twitter.com/elsdoerfer/"},"@elsdoerfer"))))}function sa(e){return r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48"},e),r.createElement("path",{d:"M24 4C12.972 4 4 12.972 4 24c0 3.275.863 6.335 2.262 9.064l-2.168 7.764c-.505 1.804 1.278 3.585 3.082 3.08l7.767-2.168C17.671 43.137 20.727 44 24 44c11.028 0 20-8.972 20-20S35.028 4 24 4zm0 3c9.406 0 17 7.594 17 17 0 9.406-7.594 17-17 17-3.003 0-5.808-.782-8.256-2.146a1.5 1.5 0 00-1.135-.135L7.223 40.78l2.062-7.383a1.5 1.5 0 00-.135-1.134A16.89 16.89 0 017 24c0-9.406 7.594-17 17-17zm-.023 5.979A1.5 1.5 0 0022.5 14.5v12a1.5 1.5 0 103 0v-12a1.5 1.5 0 00-1.523-1.521zM24 31a2 2 0 000 4 2 2 0 000-4z"}))}var ua,da,ma;var pa=Object(u.gql)(ua||(ua=Object(s.a)(['\n    query GetGovernance($block: Block_height) {\n        governance(id: "GOVERNANCE", block: $block) {\n            newDepositsAllowed\n            \n            lotSizes,\n            pendingLotSizeChange { ...Change },\n            \n            factorySelector,\n            fullyBackedFactory,\n            keepStakedFactory,\n            pendingFactoriesChange { ...Change },\n\n            signerFeeDivisor,\n            pendingSignerFeeDivisorChange { ...Change },\n\n            initialCollateralizedPercent,\n            severelyUndercollateralizedThresholdPercent,\n            undercollateralizedThresholdPercent,\n            \n            priceFeeds,\n        },\n        \n        governanceLogEntries(first: 300, orderBy: timestamp, orderDirection: desc, block: $block) {\n            id,\n            timestamp,\n            transactionHash,\n            submitter,\n            isRequest,\n            change {\n                ...Change\n            }\n        }\n    }\n\n    fragment Change on GovernanceChange {\n        type,\n        requestedAt,\n        takesEffectAfter,\n\n        newLotSizes,\n        newFactorySelector,\n        newFullyBackedFactory,\n        newKeepStakedFactory,\n    }\n'])));function Ea(){return l.a.createElement("div",{style:{padding:"20px"}},l.a.createElement(_.a,null,l.a.createElement("title",null,"Governance")),l.a.createElement("h1",{style:{marginTop:0}},"Governance"),l.a.createElement(ha,null))}function ha(){var e=B(pa),t=e.loading,n=e.error,a=e.data;return t?l.a.createElement("p",null,"Loading..."):n?l.a.createElement("p",null,"Error :( ",""+n):l.a.createElement("div",null,l.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},l.a.createElement(E,{padding:!0},l.a.createElement(ga,{title:"Deposits Enabled",tooltip:"New deposits can be paused for 10 days in an emergency."},a.governance.newDepositsAllowed?"Yes":"Emergency Break in Effect"),l.a.createElement(ga,{title:"Lot Sizes",tooltip:"The available sizes when creating a new deposit."},wa(a.governance.lotSizes)),l.a.createElement(ga,{title:"Signer Fee",tooltip:"The fee that goes to the signers who guarantee a deposit, cannot be set to a value <0.02% or >10%."},va.format(1/a.governance.signerFeeDivisor)),l.a.createElement(ga,{title:"Factory Contracts"},l.a.createElement("div",null,l.a.createElement("span",{style:{color:"#rgb(62 62 62)"}},"Factory Selector: ")," ",l.a.createElement(U,{address:a.governance.factorySelector})),l.a.createElement("div",null,l.a.createElement("span",{style:{color:"#rgb(62 62 62)"}},"Fully Backed Factory: ")," ",l.a.createElement(U,{address:a.governance.fullyBackedFactory})),l.a.createElement("div",null,l.a.createElement("span",{style:{color:"#rgb(62 62 62)"}},"Keep Staked Factory: ")," ",l.a.createElement(U,{address:a.governance.keepStakedFactory}))),l.a.createElement(ga,{title:"Collateralization Thresholds"},l.a.createElement("div",null,l.a.createElement("span",{style:{color:"#rgb(62 62 62)"}},"Initial: ")," ",a.governance.initialCollateralizedPercent,"%"),l.a.createElement("div",null,l.a.createElement("span",{style:{color:"#rgb(62 62 62)"}},"Undercollaterized: ")," ",a.governance.undercollateralizedThresholdPercent,"%"),l.a.createElement("div",null,l.a.createElement("span",{style:{color:"#rgb(62 62 62)"}},"Severly Undercollaterized: ")," ",a.governance.severelyUndercollateralizedThresholdPercent,"%")),l.a.createElement(ga,{title:"Price Feeds"},a.governance.priceFeeds.map((function(e){return l.a.createElement("div",null,l.a.createElement(U,{address:e}))})))),l.a.createElement("div",{style:{flex:0,minWidth:"400px",marginLeft:"40px"}},l.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},l.a.createElement(sa,{width:"2em",height:"2em"}),l.a.createElement("strong",{style:{marginTop:0,paddingLeft:"0.3em",fontSize:"1.2em"}},"Governance Info")),"The admin key has the following abilities: ",l.a.createElement("strong",null,"a)")," emergency break: in the first 180 days only, it can stop new deposits for 10 days."," ",l.a.createElement("strong",null,"b)")," it can change the governance parameters on the left with 48 hours notice, but only new deposits are affected."),l.a.createElement("div",{style:{marginLeft:20}},l.a.createElement(ba,null),l.a.createElement("div",{style:{height:"20px"}}),l.a.createElement(fa,null))),l.a.createElement(E,{padding:!0,style:{marginTop:"20px"}},l.a.createElement("h3",{style:{marginTop:0}},"Log"),l.a.createElement(X,{style:{width:"100%"}},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Date"),l.a.createElement("th",{style:{paddingBottom:10}},"Action"),l.a.createElement("th",null,"Submitter"),l.a.createElement("th",null,"Transaction"))),l.a.createElement("tbody",null,a.governanceLogEntries.map((function(e){return l.a.createElement(Ma,{entry:e})}))))))}function ba(){var e,t=le();return e=t?l.a.createElement("div",null,l.a.createElement("div",null,t.val.toFixed(5)," BTC"),l.a.createElement("div",{style:{marginTop:"0.5em",fontSize:"0.8em"}},l.a.createElement(ve,{time:t.timestamp})," in block ",l.a.createElement(F,{tx:t.transactionHash},t.blockNumber),".")):"-",l.a.createElement(E,{padding:!0},l.a.createElement(ga,{title:"ETH Price Feed",tooltip:"The price of 1 Ether in BTC - affects collateralization ratios. Updates live."},e))}function fa(){return l.a.createElement(E,{padding:!0},l.a.createElement(ga,{title:"Minimum Stake"},l.a.createElement(Oe,null)," ",Nt.format(function(){var e=Math.round(Date.now()/1e3);return e<1651114366?1e22*(10-Math.floor(10*(e-1588042366)/63072e3)):1e22}()/Math.pow(10,18))))}function ga(e){return l.a.createElement("div",{style:{marginBottom:"15px"}},l.a.createElement("div",null,l.a.createElement("strong",null,e.title," ",e.tooltip?l.a.createElement(Q,null,e.tooltip):null)),e.children)}var va=new Intl.NumberFormat("en-US",{style:"percent",maximumFractionDigits:2});function wa(e){return e.map((function(e){return Xe(e)})).join(", ")+" BTC"}function Ma(e){e.entry;var t,n=e.entry,a=n.change.type,r=n.isRequest;return t="LOT_SIZES"==a?r?ja:Ta:Da,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(ve,{time:e.entry.timestamp})),l.a.createElement("td",null,l.a.createElement(t,{entry:e.entry})),l.a.createElement("td",null,l.a.createElement(U,{address:e.entry.submitter,includeExternalIcon:!0})),l.a.createElement("td",null,l.a.createElement(F,{tx:e.entry.transactionHash,includeExternalIcon:!0})))}function ya(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,l.a.createElement("strong",null,e.headline)),l.a.createElement("div",{className:Object(p.a)(da||(da=Object(s.a)(["\n      font-size: .9em;  \n    "])))},e.children))}function ja(e){return l.a.createElement(ya,{headline:"Scheduled: Available lot sizes"},l.a.createElement("div",null,"New lots will be: ",l.a.createElement("span",null,wa(e.entry.change.newLotSizes))),e.entry.isRequest?l.a.createElement("div",null,l.a.createElement("span",{className:Object(p.a)(ma||(ma=Object(s.a)(["\n          color: gray;\n      "])))},"Can be applied after ",l.a.createElement(Me,{time:parseInt(e.entry.change.takesEffectAfter)})," (48 hours).")):null)}function Ta(e){return l.a.createElement(ya,{headline:"Changed: Available lot sizes"},l.a.createElement("div",null,"Lot sizes are now: "," "," ",l.a.createElement("span",null,wa(e.entry.change.newLotSizes))))}function Da(e){return e.entry.isRequest?l.a.createElement(ya,{headline:"A governance change was scheduled."}):l.a.createElement(ya,{headline:"A governance change was applied."})}var ka,Na,La,Aa,Ia,xa,Sa,Oa=n(191),Ca=n(2),za=n(193),Ba={"0xb6f512124d8ddb8d7ef8559318de92531af32f6f":"https://twitter.com/ercwl/status/1311452208127447044","0xc2c00cfaf708b44932a3172b10b2f22b891b95c9":"https://twitter.com/bcmakes/status/1311482851469094914","0x6d64c48259056248e7629f2f8b306a8dec6ebc84":"https://twitter.com/calebtebbe/status/1311486631610707968","0x425249cf0f2f91f488e24cf7b1aa3186748f7516":"https://twitter.com/_prestwich/status/1311506768988532737","0x0e98e6c1b32f61ed8396a11730ac2f7d46e9cb8b":"https://twitter.com/ekrenzke/status/1311515387159175168","0xb9ab101eb21561ee343f88271654986dbd397070":"https://twitter.com/gakonst/status/1311652009582493697","0xf253266c062014482b7b00473ca3b63211ad913e":"https://twitter.com/gtklocker/status/1311707875358711809","0xe1b06c08aa24d03bec4ac4799f7aadd183a22e5c":"https://twitter.com/viktorbunin/status/1311728473074003969","0xc8e0345596d7196941e61d3ab607e57fe61f85e7":{"3836,140":"https://twitter.com/oleveraging/status/1311731142429679621","4226,1":"https://twitter.com/statelayer/status/1316593462532284417"},"0x0536e7dd2f63f5bbe2b581b704f98f8716e40b58":"https://twitter.com/dzack23/status/1311732655491354624","0x7889296d06cd861fe6e2cd9cc671e488259ba3cf":"https://twitter.com/pedrouid/status/1311742902998097924","0xd0769849c3af28a9df5a89e602c013853eb674ed":"https://twitter.com/lightcoin/status/1311752269818458114","0x5e349eca2dc61abcd9dd99ce94d04136151a09ee":"https://twitter.com/ljxie/status/1311765940674142211","0x794aa628bd7b968051d4a1c6273f96f350a4149b":"https://twitter.com/melt_dem/status/1311762743750467591","0x725e86fe265e61b6ac4f87e36d7f353282800721":"https://twitter.com/obstropolos/status/1311770680707473409","0x07c6f80d694db95e697aea80708d6fe7dcf1e8e8":"https://twitter.com/wycdd/status/1311773359802286092","0x13c0dabeb938c21524c59cdc40bcb6fdb3618754":"https://twitter.com/ti_bi_ke/status/1311784527648391169","0x72a0d01ab425b9337f1c156cca9cdc42ea66d03c":"https://twitter.com/protocollayer/status/1311797470792429569","0x2ec7947f3ac9aaaa44b53640506cdc9d848d9489":"https://twitter.com/skumbagt/status/1312108592737083392","0xa483cda2b861bf47b1fbdc4e79cb58e843d2b1ca":"https://twitter.com/kferretcrypto/status/1312147841679122434","0xf90e729c01a5116cf0925c155b70dfb97d15e457":"https://twitter.com/Fendimannn/status/1312194276105703424","0x3b16821a5dbbff86e4a88ea0621ec6be016cd79a":"https://twitter.com/drakefjustin/status/1312659960552198144","0x1db3439a222c519ab44bb1144fc28167b4fa6ee6":"https://twitter.com/VitalikButerin/status/1312659953098784768","0xd334741d0766b257b18f2d058e844e17e346a0c1":"https://twitter.com/CarlBeek/status/1312712765530951680","0xd45a8f8bb4463e62a39ce6359ee6ac5c2c942cae":"https://twitter.com/twfhyr/status/1312727780337967107","0x69fe53eb3791dd135f71157b660c66caeff648f5":"https://twitter.com/smart_wallet_1/status/1312766730721132545","0x8da1dbeca9f637fd5ee5d44a017b2e54ed235255":"https://twitter.com/fishkiller/status/1312767380360032261","0xbc8dafeaca658ae0857c80d8aa6de4d487577c63":"https://twitter.com/Victor928/status/1312929347095781376","0x358a906ca407a35de33b930aa7cf49a301a4def1":"https://twitter.com/kevingaspar/status/1312944589268021248","0xa6a55c2699ea8ce97eedefdfbb24027e64943825":"https://twitter.com/jay_loopring/status/1313030919532376070","0x2708ea0287dee1bdb6d09d8efbbae12bae78070c":"https://twitter.com/fintie/status/1313101867837079552","0xee8091771021eb51ec7ad8ada26e2922023b3a13":"https://twitter.com/dmihal/status/1313780751159177216","0x1786d033d5cbcc235b673e872c7613c2f83da583":"https://twitter.com/NirbhikJangid/status/1313882894813650947","0x7148adcbf447e13b13390689ee5425886ca0cf3a":"https://twitter.com/stanlyjohnson72/status/1313922896738230272","0x545c83e60bdc60cbc6357c33d817b4ba6ff832a9":"https://twitter.com/bitcoinislife/status/1314153308894965760","0x5d3c106b91de817c4fb5e255bf87b6cd6a697d29":"https://twitter.com/thesaltynarwhal/status/1314178692847984640","0x559960cce06978064aa6aeba5b2d8b3150d11ae6":"https://twitter.com/Emiel94871727/status/1314165438872420352","0x568312a86f19695f9c21f472717f4f1dd8281907":"https://twitter.com/eduardoagut/status/1314257121794560003","0x21b9dfc3d06d87639050314f2b53df0224e47faa":"https://twitter.com/jl2fa/status/1314409822180249611","0x29acc35da10b4b00fd135e0077822e95ba928410":"https://twitter.com/cshaotweets/status/1316460551447298048"};function Ra(){return l.a.createElement("div",{className:Object(p.a)(ka||(ka=Object(s.a)(["\n      padding: 1em;\n    "])))},l.a.createElement(_.a,null,l.a.createElement("title",null,"#tBTCzksynctorch")),l.a.createElement(Ua,null))}function Ua(){var e=Object(r.useState)(null),t=Object(c.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(!1),i=Object(c.a)(o,2),u=i[0],d=i[1],m=Object(r.useState)(!0),E=Object(c.a)(m,2),h=E[0],b=E[1];return Object(r.useEffect)((function(){b(!0),fetch("https://tbtc-torch.srvpool.de/torch").then(function(){var e=Object(Fe.a)(Pe.a.mark((function e(t){var n;return Pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:n=e.sent,a(n.reverse()),b(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){d(!0),b(!1)}))}),[]),h?l.a.createElement("p",null,"Loading..."):u?l.a.createElement("p",null,"Error :("):l.a.createElement("div",{className:Object(p.a)(Na||(Na=Object(s.a)(["\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n  "])))},l.a.createElement("div",{className:Object(p.a)(La||(La=Object(s.a)(["\n      display: flex;\n      flex-direction: row;\n      font-size: 30px;\n      margin-top: 20px;\n      margin-bottom: 45px;\n  "])))},l.a.createElement("a",{href:"https://twitter.com/search?q=%23tBTCzksynctorch&src=typed_query"},"#tBTCzksynctorch")),l.a.createElement("div",{className:Object(p.a)(Aa||(Aa=Object(s.a)(["\n      display: flex;\n      flex-direction: column;\n      & > * {\n        margin-right: 20px;\n        }\n    "])))},n.map((function(e,t){return l.a.createElement("div",{className:Object(p.a)(Ia||(Ia=Object(s.a)(["\n            margin-bottom: 10px;\n          "])))},l.a.createElement(Pa,{num:n.length-t+1,from:e.to,amount:e.amount,time:e.timestamp,txid:e.tx_id}),l.a.createElement("div",{style:{textAlign:"center",margin:20}},"\u2191"))})),l.a.createElement(Pa,{num:1,from:n[n.length-1].from,amount:0})))}function Pa(e){var t,n,a=e.from,r=e.amount,o=e.time,i=Ba[a];"object"==typeof i&&(i=i[null!==(t=e.txid)&&void 0!==t?t:""]);i&&(n=i.match(/status\/(\d+)$/)[1]);return l.a.createElement(E,{padding:!0},l.a.createElement("div",{style:{color:"gray",fontSize:"0.9em",display:"flex",flexDirection:"row",alignItems:"center"}},l.a.createElement("span",{className:Object(p.a)(xa||(xa=Object(s.a)(["\n          background: #48DBB4;\n          color: black;\n          width: 25px;\n          height: 25px;\n          border: 1px solid transparent;\n          border-radius: 50%;\n          display: inline-block;\n          text-align: center;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin-right: 10px;\n      "])))},e.num),l.a.createElement(ve,{time:o})),l.a.createElement("div",null,l.a.createElement("a",{href:"https://zkscan.io/explorer/accounts/".concat(a)},a)),e.amount?l.a.createElement("div",null,l.a.createElement("strong",null,r/1e18," TBTC")):null,n?l.a.createElement(za.a,{tweetId:n,options:{conversation:"none"},placeholder:l.a.createElement("div",null,"...")}):null)}var Fa=Object(u.gql)(Sa||(Sa=Object(s.a)(["\n    query GetUsers(\n        $orderBy: User_orderBy,\n        $direction: OrderDirection,\n        $block: Block_height\n    ) {\n        users(first: 1000, orderBy: $orderBy, orderDirection: $direction, block: $block) {\n            id,\n            address,\n            numDepositsCreated,\n            numDepositsUnfunded,\n            numDepositsRedeemed,\n            numOwnDepositsRedeemed\n        }\n    }\n"])));function Ya(){var e=V("numDepositsCreated"),t=B(Fa,{variables:{orderBy:e.column,direction:e.direction}}),n=t.loading,a=t.error,r=t.data;return a?l.a.createElement("p",null,"Error :( ",""+a):l.a.createElement("div",{style:{padding:"20px"}},l.a.createElement(_.a,null,l.a.createElement("title",null,"Users")),l.a.createElement("h1",{style:{marginTop:0,marginBottom:25}},"Users"),l.a.createElement(E,{padding:!0},l.a.createElement(Ga,{data:r,sortState:e,loading:n})))}function Ga(e){var t=e.data;return l.a.createElement(X,{style:{width:"100%"}},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Address"),l.a.createElement("th",null,l.a.createElement($,{fieldId:"numDepositsCreated",state:e.sortState},"# Created ",l.a.createElement(Q,null,"Number of deposits the address has initiated."))),l.a.createElement("th",null,l.a.createElement($,{fieldId:"numDepositsUnfunded",state:e.sortState},"# Unfunded ",l.a.createElement(Q,null,"Number of deposits the address has initiated, and then not completed funding."))),l.a.createElement("th",null,l.a.createElement($,{fieldId:"numDepositsRedeemed",state:e.sortState},"# Redeemed ",l.a.createElement(Q,null,"Number of deposits this address has redeemed."))),l.a.createElement("th",null,l.a.createElement($,{fieldId:"numOwnDepositsRedeemed",state:e.sortState},"# Own Redeemed ",l.a.createElement(Q,null,"Number of deposits this address has redeemed which were also created by it."))))),l.a.createElement("tbody",null,e.loading?l.a.createElement(ke,{columns:5}):null,null===t||void 0===t?void 0:t.users.map((function(e){return l.a.createElement("tr",{key:e.id},l.a.createElement("td",null,l.a.createElement(U,{long:!0,address:e.address})),l.a.createElement("td",null,e.numDepositsCreated),l.a.createElement("td",null,e.numDepositsUnfunded),l.a.createElement("td",null,e.numDepositsRedeemed),l.a.createElement("td",null,e.numOwnDepositsRedeemed))}))))}n(293);var Wa,Qa,Ha=Object(u.gql)(Wa||(Wa=Object(s.a)(["\n    query GetRelayEntries($block: Block_height) {\n        randomBeaconGroups(first: 1000, orderBy: createdAt, orderDirection: desc, block: $block) {\n            id,\n            pubKey,\n            createdAt,\n            uniqueMemberCount,\n            rewardPerMember,\n        }\n        relayEntries(first: 1000, orderBy: requestedAt, orderDirection: desc, block: $block) {\n            id,\n            requestId,\n            value,\n            requestedAt,\n            generatedAt,\n            rewardPerMember,\n            group {\n                id,\n                pubKey\n            }\n        }\n    }\n"])));function Za(){var e=B(Ha),t=e.loading,n=e.error,a=e.data;return t?l.a.createElement("p",null,"Loading..."):n?l.a.createElement("p",null,"Error :( ",""+n):l.a.createElement("div",{style:{padding:"20px"}},l.a.createElement(_.a,null,l.a.createElement("title",null,"Random Beacon")),l.a.createElement("h1",{style:{marginTop:0,marginBottom:25}},"Random Beacon"),l.a.createElement(Je.d,null,l.a.createElement(Je.b,null,l.a.createElement(Je.a,null,"Entries ",l.a.createElement(Q,null,"Random numbers requested by smart contracts on Ethereum, notably the tBTC system.")),l.a.createElement(Je.a,null,"Groups ",l.a.createElement(Q,null,"Operator groups tasked with providing randomness."))),l.a.createElement(Je.c,null,l.a.createElement(E,{padding:!0},l.a.createElement(Ka,{data:a}))),l.a.createElement(Je.c,null,l.a.createElement(E,{padding:!0},l.a.createElement(_a,{data:a})))))}function Ka(e){var t=e.data;return l.a.createElement(X,{style:{width:"100%"}},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Requested At"),l.a.createElement("th",null,"Provided After"),l.a.createElement("th",null,"Group ",l.a.createElement(Q,null,"The group providing this result.")),l.a.createElement("th",null,"Reward ",l.a.createElement(Q,null,"ETH earned by each member of the group providing this value.")),l.a.createElement("th",null,"Random Value"),l.a.createElement("th",null,"Request ID"))),l.a.createElement("tbody",null,t.relayEntries.map((function(e){return l.a.createElement("tr",{key:e.id},l.a.createElement("td",null,l.a.createElement(ve,{time:e.requestedAt})),l.a.createElement("td",null,l.a.createElement(ye,{earlier:e.requestedAt,later:e.generatedAt})),l.a.createElement("td",null,l.a.createElement(Y,{hash:e.group.pubKey,to:"/group/".concat(e.group.id)},wt(e.group.id))),l.a.createElement("td",null,e.value?l.a.createElement(l.a.Fragment,null,l.a.createElement(Ce,null)," ",l.a.createElement(Mt,{unit:"gwei",wei:e.rewardPerMember})):null),l.a.createElement("td",{style:{fontSize:"14px"}},e.value?l.a.createElement(l.a.Fragment,null,e.value.slice(0,12),"..."):null),l.a.createElement("td",null,e.requestId))}))))}function _a(e){var t=e.data;return l.a.createElement(X,{style:{width:"100%"}},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Group"),l.a.createElement("th",null,"Total Rewards ",l.a.createElement(Q,null,"ETH earned by each member in this group.")),l.a.createElement("th",null,"Created At"))),l.a.createElement("tbody",null,t.randomBeaconGroups.map((function(e){return l.a.createElement("tr",{key:e.id},l.a.createElement("td",null,l.a.createElement(Y,{hash:e.pubKey,to:"/group/".concat(e.id)},wt(e.id))),l.a.createElement("td",null,l.a.createElement(Se,null)," ",l.a.createElement(Mt,{unit:"eth",wei:e.rewardPerMember})),l.a.createElement("td",null,l.a.createElement(ve,{time:e.createdAt})))}))))}var qa=Object(u.gql)(Qa||(Qa=Object(s.a)(["\n    query GetRandomBeaconGroup($id: ID!, $block: Block_height) {\n        randomBeaconGroup(id: $id, block: $block) {\n            id,\n            createdAt,\n            rewardPerMember,\n            memberships(orderBy: count, orderDirection: desc) {\n                id,\n                count,\n                reward,\n                operator {\n                    address,\n                    stakedAmount\n                }\n            },\n            relayEntries(first: 1000, orderBy: requestedAt, orderDirection:desc) {\n                id,\n                requestId,\n                value,\n                requestedAt,\n                generatedAt,\n                rewardPerMember,\n                group {\n                    id,\n                    pubKey\n                }\n            }\n        }\n    }\n"])));function Ja(){var e=Object(m.i)().id,t=B(qa,{variables:{id:e}}),n=t.loading,a=t.error,r=t.data;if(n)return l.a.createElement("p",null,"Loading...");if(a)return l.a.createElement("p",null,"Error :( ",""+a);var o=r.randomBeaconGroup;return o?l.a.createElement("div",{style:{padding:"20px"}},l.a.createElement(_.a,null,l.a.createElement("title",null,"Random Beacon Group: ",wt(o.id))),l.a.createElement(Te,{label:wt(o.id),subtitle:"Random Beacon Group"},l.a.createElement(je,null,l.a.createElement(ie,{label:"reward per member"},l.a.createElement(Mt,{wei:o.rewardPerMember})," ETH"),l.a.createElement(ie,{label:"created"},l.a.createElement(ve,{time:o.createdAt})))),l.a.createElement(Je.d,null,l.a.createElement(Je.b,null,l.a.createElement(Je.a,null,"Members"),l.a.createElement(Je.a,null,"Entries ",l.a.createElement(Q,null,"Entries generated by this group."))),l.a.createElement(Je.c,null,l.a.createElement(E,{padding:!0},l.a.createElement(X,{style:{width:"100%"}},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Operator"),l.a.createElement("th",null,"Weight ",l.a.createElement(Q,null,"An operator can fill multiple membership slots in a group, and will then earn a multiple of rewards.")),l.a.createElement("th",null,"ETH Earned ",l.a.createElement(Q,null,"ETH earned by the operator through membership in the group.")),l.a.createElement("th",null,"Amount Staked ",l.a.createElement(Q,null,"The amount of KEEP staked affects how often an operator is chosen for a beacon group, and at what weight.")))),l.a.createElement("tbody",null,o.memberships.map((function(e){e.group;return l.a.createElement("tr",{key:e.id},l.a.createElement("td",null,l.a.createElement(Y,{hash:e.operator.address,to:"/operator/".concat(e.operator.address)})),l.a.createElement("td",null,e.count),l.a.createElement("td",null,l.a.createElement(Se,null)," ",l.a.createElement(Mt,{unit:"eth",wei:e.reward})),l.a.createElement("td",null,l.a.createElement(Oe,null)," ",Nt.format(e.operator.stakedAmount)))})))))),l.a.createElement(Je.c,null,l.a.createElement(E,{padding:!0},l.a.createElement(X,{style:{width:"100%"}},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Requested At"),l.a.createElement("th",null,"Provided After"),l.a.createElement("th",null,"Reward ",l.a.createElement(Q,null,"ETH earned by each member of the group providing this value.")),l.a.createElement("th",null,"Random Value"),l.a.createElement("th",null,"Request ID"))),l.a.createElement("tbody",null,o.relayEntries.map((function(e){return l.a.createElement("tr",{key:e.id},l.a.createElement("td",null,l.a.createElement(ve,{time:e.requestedAt})),l.a.createElement("td",null,l.a.createElement(ye,{earlier:e.requestedAt,later:e.generatedAt})),l.a.createElement("td",null,e.value?l.a.createElement(l.a.Fragment,null,l.a.createElement(Ce,null)," ",l.a.createElement(Mt,{unit:"gwei",wei:e.rewardPerMember})):null),l.a.createElement("td",{style:{fontSize:"14px"}},e.value?l.a.createElement(l.a.Fragment,null,e.value.slice(0,12),"..."):null),l.a.createElement("td",null,e.requestId))})))))))):l.a.createElement("p",null,"No such group.")}var Xa,Va,$a,er,tr,nr,ar=n(63),rr=n(141),lr=Object(u.gql)(Xa||(Xa=Object(s.a)(['\n    query GetStakedropData($block: Block_height) {\n        stakedropIntervals {\n            id,\n            number,\n            beaconIntervalStart,\n            beaconIntervalEnd,\n            ecdsaIntervalStart,\n            ecdsaIntervalEnd,\n            keepCount,\n            beaconGroupCount,\n            allocationECDSA,\n            allocationBeacon,\n        },\n        stats: statsRecord(id: "current") {\n            totalStakedropECDSARewards,\n            unallocatedStakedropECDSARewards,\n            totalStakedropBeaconRewards,\n            unallocatedStakedropBeaconRewards,\n            dispensedStakedropBeaconRewards,\n            dispensedStakedropECDSARewards\n        },\n        status: statusRecord(id: "current") {\n          totalRewardWeight\n        }\n    }\n']))),or=[.04,.0768,.08832000000000001,.0953856,.10492416,.089185536,.0758077056,.06443654976,.054771067296,.0465554072016,.03957209612136,.033636281703155996,.028590839447682596,.02430221353053021,.020656881500950675,.017558349275808075,.014924596884436864,.012685907351771334,.010783021249005634,.00916556806165479,.0077907328524065705,.006622122924545585,.005628804485863747,.004784483812984185],ir=Math.max.apply(Math,or);function cr(){return function(e){var t=or.length;if(e<1600041600)return 0;var n=(e-1600041600)/2592e3;if(n>=t)return-1;return Math.floor(n)}(Date.now()/1e3)}function sr(e){return 2592e3*e+1600041600}function ur(){var e,t,n=Object(m.i)().id,a=B(lr,{variables:{id:n}}),o=a.error,i=a.data,u=Ge(),d=Object(r.useState)(null),E=Object(c.a)(d,2),h=E[0],b=E[1],f=Object(r.useCallback)((function(e){b(e)}),[]);if(o)return l.a.createElement("p",null,"Error :( ",""+o);var g=Object(ar.a)(null!==(e=null===i||void 0===i?void 0:i.stakedropIntervals)&&void 0!==e?e:[]);g.reverse();var v=2e8*or[cr()];return l.a.createElement("div",{style:{padding:"20px",maxWidth:"1000px",margin:"0 auto"}},l.a.createElement(_.a,null,l.a.createElement("title",null,"Stakedrop")),l.a.createElement("h1",{style:{marginTop:0,fontSize:45,fontFamily:"Roboto Slab",color:"#4e8778",fontWeight:900,borderBottom:"2px dotted #4e8778",textAlign:"center"}},"The Stakedrop"),l.a.createElement("div",{style:{margin:"0 auto 60px"}},l.a.createElement(je,{style:{justifyContent:"center"}},l.a.createElement("div",null,"The Stakedrop is an incentive program that rewards node operators with KEEP tokens in exchange for providing collateral to the system.",l.a.createElement("p",null,"Learn more about the program in the ",l.a.createElement("a",{href:"https://staking.keep.network/about-staking/staking-economics"},"Keep documentation")," or read the ",l.a.createElement("a",{href:"https://blog.keep.network/a-new-rewards-mechanism-deef3412c3e1"},"Keep blog."))),l.a.createElement(ie,{label:"total allocation",tooltip:"Total rewards to be distributed to node  operators over the 2-year stakedrop period."},l.a.createElement("strong",null,Nt.format(2e8)),l.a.createElement(mr,{coinPrices:u,keep:2e8,style:{display:"block"}})))),l.a.createElement(Je.d,null,l.a.createElement(Je.b,null,l.a.createElement(Je.a,null,"ECDSA ",l.a.createElement(Q,null,"Rewards for ETH providers.")),l.a.createElement(Je.a,null,"Beacon ",l.a.createElement(Q,null,"Rewards for Beacon operators."))),l.a.createElement(Je.c,null,l.a.createElement(hr,{totalWeight:(null===i||void 0===i?void 0:i.status)?parseFloat(null===(t=i.status)||void 0===t?void 0:t.totalRewardWeight):null,onRewardShareChanged:f,intervalAllocation:v}),l.a.createElement("div",{className:Object(p.a)(Va||(Va=Object(s.a)(["\n          margin-top: 50px;\n          display: flex;\n          flex-direction: row;\n          height: 300px;\n          justify-content: center;\n          align-items: flex-start;\n          \n          .interval-container {\n            max-width: 45px;\n            flex: 1;\n            margin: 2px;\n            writing-mode: vertical-lr;\n            height: 100%;\n            display: flex;\n            justify-content: flex-end;\n            align-items: center;\n          }\n          .interval-bar {\n            color: white;\n            display: flex;\n            width: 100%;\n            flex-direction: row;\n            align-items: center;\n            justify-content: flex-end;\n            padding: 10px 0;\n          }\n          .interval-outsidetext {\n            flex-direction: row;\n            align-items: center;\n            justify-content: center;\n            padding: 10px 0;\n          }\n          .interval-text {\n            display: block;\n            transform: rotate(-180deg);\n          }\n          .number {\n            writing-mode: lr;\n            font-size: 14px;\n            margin-top: 3px;\n            color: gray; \n          }\n        "])))},or.map((function(e,t){var n,a=e/ir*100,r=sr(t),o=sr(t)+2592e3,i=Date.now()/1e3>o,c=ge(r).toLocaleString({month:"long",year:"numeric"}),s=((null===h||void 0===h?void 0:h.eth)&&(null===h||void 0===h?void 0:h.keep)&&(null===h||void 0===h?void 0:h.rewardShare)&&pr({rewardShare:null===h||void 0===h?void 0:h.rewardShare,intervalAllocation:2e8*or[t],ethUsed:null!==(n=null===h||void 0===h?void 0:h.eth)&&void 0!==n?n:null,keepUsed:null===h||void 0===h?void 0:h.keep,coinPrices:u}),i?l.a.createElement(l.a.Fragment,null,"Ran from ",l.a.createElement(Me,{format:"simple",time:r})," to ",l.a.createElement(Me,{format:"full",time:o}),". Distributed ",Nt.format(2e8*e)," ",l.a.createElement("small",null,"KEEP"),"."):l.a.createElement(l.a.Fragment,null,"Runs from ",l.a.createElement(Me,{format:"simple",time:r})," to ",l.a.createElement(Me,{format:"full",time:o}),". Distributes ",Nt.format(2e8*e)," ",l.a.createElement("small",null,"KEEP"),".")),d=c;return l.a.createElement("div",{className:"interval-container"},a<=50?l.a.createElement("div",{className:"interval-outsidetext"},l.a.createElement("span",{className:"interval-text"},d)):null,l.a.createElement(G.a,{content:s},l.a.createElement("div",{style:{height:"".concat(a,"%"),backgroundColor:i?"silver":"rgb(78, 135, 120)"},className:"interval-bar"},a>50?l.a.createElement("span",{className:"interval-text"},d):null)),l.a.createElement("div",{className:"number"},t+1))}))),g.length?l.a.createElement("div",null,l.a.createElement("h2",{style:{marginTop:"70px"}},"Old Scheme"),l.a.createElement("p",{style:{marginTop:0}},"Stakedrop Intervals 1 and 2 used a different rewards mechanism. This is kept for historical reference."),g.slice(2).map((function(e){return l.a.createElement("div",null,l.a.createElement(dr,{interval:e,coinPrices:u,showECDSA:!0,showBeacon:!1}),e.number>1?l.a.createElement("hr",{className:Object(p.a)($a||($a=Object(s.a)(["\n                  background: #4e8778;\n                  height: 1px;\n                  border: 0;\n                "])))}):null)}))):null),l.a.createElement(Je.c,null,g.map((function(e){return l.a.createElement(r.Fragment,{key:e.number},l.a.createElement(dr,{interval:e,coinPrices:u,showECDSA:!1,showBeacon:!0}),e.number>1?l.a.createElement("hr",{className:Object(p.a)(er||(er=Object(s.a)(["\n          background: #4e8778;\n          height: 1px;\n          border: 0;\n        "])))}):null)})))))}function dr(e){var t,n=e.interval,a=e.coinPrices,r=n.allocationECDSA/Math.max(n.keepCount,1e3)/3,o=n.allocationBeacon?n.allocationBeacon/n.beaconGroupCount/64:null,i=ge(n.ecdsaIntervalEnd),c=i.diffNow("seconds").seconds,s=ge(n.beaconIntervalEnd),u=s.diffNow("seconds").seconds,d=e.showECDSA?parseInt(n.allocationECDSA):parseInt(null!==(t=n.allocationBeacon)&&void 0!==t?t:0),m=e.showECDSA?n.ecdsaIntervalStart:n.beaconIntervalStart,p=e.showECDSA?i:s,E=e.showECDSA?c:u;return l.a.createElement("div",{style:{margin:"30px 0 30px",display:"flex",flexDirection:"row",alignItems:"flex-start"}},l.a.createElement("div",null,l.a.createElement("div",{style:{fontFamily:"Roboto Slab",color:"#4e8778",fontWeight:900,fontSize:60,lineHeight:1}},n.number,l.a.createElement("span",{style:{fontSize:"0.4em"}},1==n.number?"st":2==n.number?"nd":3==n.number?"rd":"th")),l.a.createElement("div",{style:{color:"#4e8778"}},"Interval")),l.a.createElement("div",{style:{marginLeft:"45px",display:"flex",flexDirection:"column",flex:1}},l.a.createElement(je,null,l.a.createElement(ie,{label:"KEEP to be distributed",style:{flex:3}},Nt.format(d),l.a.createElement(mr,{coinPrices:a,keep:d})),e.showECDSA?l.a.createElement(ie,{label:"KEEP per deposit",style:{flex:2},tooltip:"Reward an operator earns for each deposit they are collateralizing in the interval. For interval ".concat(n.number," this is based on ").concat(n.keepCount," keeps created.")},Nt.format(r),l.a.createElement(mr,{coinPrices:a,keep:r})):null,e.showBeacon?l.a.createElement(ie,{label:"KEEP per beacon group",style:{flex:2},tooltip:"Reward an operator earns for each beacon group they are participating in. For interval ".concat(n.number," this is based on ").concat(n.beaconGroupCount," groups.")},null===o?l.a.createElement(l.a.Fragment,null,"-"):l.a.createElement(l.a.Fragment,null,Nt.format(o),l.a.createElement(mr,{coinPrices:a,keep:o}))):null),l.a.createElement("div",{style:{marginTop:"16px",fontSize:"14px"}},E>0?l.a.createElement(l.a.Fragment,null,"Began ",l.a.createElement(Me,{time:m,format:"simple"})," and there are "," ",l.a.createElement("span",{title:p.toLocaleString(fe.DateTime.DATETIME_FULL),style:{color:"green",fontWeight:"bold"}},we(E)," remaining"),"."):l.a.createElement(l.a.Fragment,null,"Ran from ",l.a.createElement(Me,{format:"simple",time:m})," to ",l.a.createElement(Me,{format:"simple",time:p}),"."))))}function mr(e){if(!e.coinPrices.keep)return null;var t=e.keep*e.coinPrices.keep;return l.a.createElement("span",{style:Object(b.a)({color:"gray",fontSize:"0.5em",paddingLeft:"0.3em"},e.style)},e.showTilde?"~":null,l.a.createElement(We,{dollar:t,showCents:!1}))}function pr(e){var t=e.coinPrices,n=(e.ethUsed,e.keepUsed,e.rewardShare),a=e.intervalAllocation,r=t.ethereum,l=t.keep,o=n*a;if(!l||!r)return null;var i;return{usd:i=o*l,keep:o,apr:12*(i/(e.ethUsed*r+e.keepUsed*l))}}function Er(e){var t=Ge(),n=t.ethereum,a=t.keep,r=e.rewardShare,o=e.intervalAllocation,i=e.ethUsed,c=e.keepUsed,u=null;return a&&n&&i&&c&&r&&(u=pr({rewardShare:r,intervalAllocation:o,ethUsed:i,keepUsed:c,coinPrices:t})),null===r||null===u?null:l.a.createElement("div",{className:Object(p.a)(tr||(tr=Object(s.a)(["\n    font-size: 16px;\n    .value {\n      margin: 10px 0;\n      font-size: 24px;\n    }\n    .value .header {\n      font-size: 0.7em; \n    }\n    strong small {\n    }\n  "])))},l.a.createElement("div",{className:"value"},l.a.createElement("div",{className:"header"},"Est. Payout Interval ",cr()+1),l.a.createElement("strong",null,Nt.format(u.keep)," ",l.a.createElement("small",null,"KEEP")),l.a.createElement(mr,{showTilde:!0,coinPrices:t,keep:u.keep})),l.a.createElement("div",{className:"value"},l.a.createElement("div",{className:"header"},"APR"),l.a.createElement("strong",null,Ie(u.apr))),l.a.createElement("div",null,l.a.createElement("strong",null,Ie(r))," of rewards."))}function hr(e){var t=e.totalWeight,n=Object(r.useState)(300),a=Object(c.a)(n,2),o=a[0],i=a[1],u=Object(r.useState)(300),d=Object(c.a)(u,2),m=d[0],E=d[1],h=Object(r.useState)(8e4),b=Object(c.a)(h,2),f=b[0],g=b[1],v=Object(r.useState)(8e4),w=Object(c.a)(v,2),M=w[0],y=w[1],j=Object(r.useCallback)((function(e){var t=e.target.value;y(e.value);var n=Object(rr.toNumber)(t);Number.isNaN(n)?g(null):g(n)}),[]),T=Object(r.useCallback)((function(e){var t=e.target.value;E(e.value);var n=Object(rr.toNumber)(t);Number.isNaN(n)?i(null):i(n)}),[]),D=(null===f||null===o?{rewardWeight:null}:function(e){var t=e.ethLocked>3e3?2*Math.sqrt(3e3*e.ethLocked)-3e3:e.ethLocked,n=e.stakedAmount/7e4,a=0==e.ethLocked?0:Math.sqrt(e.stakedAmount/(500*e.ethLocked)),r=1+Math.min(n,a);return{rewardWeight:t*r,boost:r,ethScore:t}}({ethLocked:o,stakedAmount:f})).rewardWeight,k=null===D||null==t?null:D/(t+D);return Object(r.useEffect)((function(){e.onRewardShareChanged({rewardShare:k,eth:o,keep:f})}),[k]),l.a.createElement("div",{className:Object(p.a)(nr||(nr=Object(s.a)(["\n    border: 1px silver dotted;\n    padding: 20px;\n    background: white;\n    \n    display: flex;\n    flex-direction: row;\n    align-items: flex-start;\n    justify-content: flex-start;\n    \n    .inputs {\n      flex: 1;\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n    }\n    h3 {\n      margin: 0px;\n      margin-bottom: 15px;\n      font-size: 18px;\n    }\n    .inputs > div {\n      margin: 5px;\n    }\n    .inputs label {\n      color: gray;\n      display: block;\n    }\n    input {\n      text-align: center;\n      font-size: 22px;\n      padding: 0.4em;\n    }\n    .result {\n      flex: 1;\n      text-align: center;\n    }\n  "])))},l.a.createElement("div",{className:"root"},l.a.createElement("h3",null,"Rewards Calculator"),l.a.createElement("div",{className:"inputs"},l.a.createElement("div",null,l.a.createElement("label",null,"KEEP Staked"),l.a.createElement("input",{value:M,onChange:j})),l.a.createElement("div",null,l.a.createElement("label",null,"ETH Locked"),l.a.createElement("input",{value:m,onChange:T})))),l.a.createElement("div",{className:"result"},l.a.createElement(Er,{rewardShare:k,intervalAllocation:e.intervalAllocation,ethUsed:o,keepUsed:f})))}var br,fr=n(142),gr=n(309),vr=Object(u.gql)(br||(br=Object(s.a)(["\n    query GetGrants(\n        $orderBy: Grant_orderBy,\n        $direction: OrderDirection,\n        $block: Block_height\n    ) {\n        grants(first: 1000, orderBy: $orderBy, orderDirection: $direction, block: $block) {\n          id,\n          grantee,\n          revokedAt,\n          revokedAmount,\n          revokedWithdrawn,\n          revocable,\n          amount,\n          duration,\n          timestamp,\n          start,\n          cliff,\n          withdrawn,\n          staked,\n          stakingPolicy,\n          transactionHash,\n        }\n    }\n"])));function wr(){var e=V("timestamp"),t=B(vr,{variables:{orderBy:e.column,direction:e.direction}}),n=t.loading,a=t.error,r=t.data;return a?l.a.createElement("p",null,"Error :( ",""+a):l.a.createElement("div",{style:{padding:"20px"}},l.a.createElement(_.a,null,l.a.createElement("title",null,"Grants")),l.a.createElement("h1",{style:{marginTop:0,marginBottom:25}},"Grants"),l.a.createElement(E,{padding:!0},l.a.createElement(yr,{data:r,sortState:e,loading:n})))}var Mr={"0x1b612f89eee49b0fb1dcd429cf2109a9699acd53":{label:"Permissive",description:"Allows the grantee to stake the entire grant, regardless of its unlocking status."},"0x36d293d15168ccdf93d1294d4a51a6d6c070f1ff":{label:"Adaptive 5x/90d",description:"Allows the grantee to always stake 5 times the minimum stake, or the amount that would be unlocked 90 days in the future, if it is greater."},"0x68d9e6f0bee28a2ba31ab4410fd42205550d5612":{label:"Adaptive 1x/90d",description:"Allows the grantee to always stake the minimum stake, or the amount that would be unlocked 90 days in the future, if it is greater."},"0x3715f0775310d970697f164699820e1a93109eac":{label:"Adaptive 0x/90d",description:"Allows the grantee to stake the amount that would be unlocked 90 days in the future."},"0x57edf653ba095feea910fa62298654dfc588d762":{label:"Adaptive 5x/-",description:"Allows the grantee to always stake 5 times the minimum stake."},"0x4c3ad59b5a32f2d076051d01d6f58bc75d278159":{label:"Guaranteed Minimum",description:"Allows the grantee to always stake the minimum stake, or the unlocked amount if greater."}};function yr(e){var t=e.data,n=Object(G.b)(),a=Object(c.a)(n,2),o=a[0],i=a[1],s=l.a.useMemo((function(){return[{label:"Updated At",tooltip:"The last time any action affected this grant, including withdrawal, revocation or staking.",Header:ee,accessor:"timestamp",Cell:function(e){var t=e.value;e.row;return l.a.createElement(ve,{time:t})}},{Header:"Grantee",Cell:function(e){var t=e.value;return l.a.createElement(U,{address:t})},accessor:"grantee"},{accessor:"state",label:"State",Header:ee,tooltip:"Light Grey: Withdrawn, Green: Staked, Red: Revoked, Dark Gray: Rest",disableSortBy:!0,Cell:function(e){e.value;var t=e.row;return l.a.createElement(Sr,{grant:t.original})}},{label:"Amount",Header:ee,Cell:function(e){var t=e.value;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Oe,null)," ",l.a.createElement(Lt,{raw:t}))},accessor:"amount"},{label:"Withdrawn",Header:ee,Cell:function(e){var t=e.value;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Oe,null)," ",l.a.createElement(Lt,{raw:t}))},accessor:"withdrawn"},{label:"Staked",Header:ee,accessor:"staked",Cell:function(e){var t=e.value;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Oe,null)," ",l.a.createElement(Lt,{raw:t}))}},{label:"Duration",tooltip:"Total duration of the grant, over which time it gradually unlocks.",Header:ee,accessor:"duration",Cell:function(e){var t=e.value,n=e.row.original,a=Math.max(0,Date.now()/1e3-parseInt(n.cliff))/parseInt(t);return a>=1?l.a.createElement("span",{style:{color:"gray"}},we(t)):l.a.createElement(fn,{progress:a,singleColor:"#f7e4ce"},we(t))}},{Header:"Cliff",accessor:"cliff",Cell:function(e){var t=e.value,n=e.row;return n.original.start==t?"":l.a.createElement(ye,{earlier:n.original.start,later:t})}},{Header:ee,label:"Start",accessor:"start",Cell:function(e){var t=e.value;return l.a.createElement(Me,{time:t,format:"day-full"})}},{Header:"Revoked",accessor:"revokedSummary",Cell:function(e){e.value;var t=e.row.original;return t.revokedAt&&"0"!=t.revokedAt?l.a.createElement(l.a.Fragment,null,l.a.createElement(Me,{time:t.revokedAt,format:"day-full"})):t.revocable?"":l.a.createElement("small",{style:{color:"gray"}},"non-revocable")}},{Header:ee,label:"Staking Policy",Cell:function(e){var t=e.value,n=Mr[t]||{label:null};return l.a.createElement(l.a.Fragment,null,l.a.createElement(U,{address:t,children:n.label})," ",n.description?l.a.createElement(Q,{singleton:i},n.description):null)},accessor:"stakingPolicy"}]}),[]),u=Object(r.useMemo)((function(){return[{id:e.sortState.column,desc:"desc"===e.sortState.direction}]}),[e.sortState]),d=Object(fr.useTable)({columns:s,data:Object(r.useMemo)((function(){var e;return null!==(e=null===t||void 0===t?void 0:t.grants)&&void 0!==e?e:[]}),[null===t||void 0===t?void 0:t.grants]),useControlledState:function(e){return l.a.useMemo((function(){return Object(b.a)(Object(b.a)({},e),{},{sortBy:u})}),[e,u])},manualSortBy:!0,autoResetSortBy:!1,sortState:e.sortState},fr.useSortBy),m=d.getTableProps,p=d.getTableBodyProps,E=d.headerGroups,h=d.rows,f=d.prepareRow;d.state.sortBy;return l.a.createElement(l.a.Fragment,null,l.a.createElement(G.a,{singleton:o,delay:500}),l.a.createElement(X,Object.assign({style:{width:"100%"}},m()),l.a.createElement("thead",null,E.map((function(e){return l.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map((function(e){return l.a.createElement("th",e.getHeaderProps(),e.render("Header"))})))}))),l.a.createElement("tbody",p(),e.loading?l.a.createElement(ke,{columns:s.length}):null,h.map((function(e){return f(e),l.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return l.a.createElement("td",e.getCellProps(),e.render("Cell"))})))})))))}var jr,Tr,Dr,kr,Nr,Lr,Ar,Ir,xr,Sr=l.a.memo((function(e){var t=e.grant,n=gr.a.from(t.amount);if(n.isZero())return null;var a=gr.a.from(t.staked).divUnsafe(n),r=gr.a.from(t.withdrawn).divUnsafe(n),o=gr.a.from(t.revokedAmount).divUnsafe(n),i=gr.a.from("1").subUnsafe(a).subUnsafe(o).subUnsafe(r),c=gr.a.from("100");return l.a.createElement("div",{style:{width:"150px",height:"20px",display:"flex",flexDirection:"row"}},l.a.createElement("div",{style:{backgroundColor:"#dcdcdc",width:"".concat(r.mulUnsafe(c).toString(),"px")}}),l.a.createElement("div",{style:{backgroundColor:"#4caf50",width:"".concat(a.mulUnsafe(c).toString(),"px")}}),l.a.createElement("div",{style:{backgroundColor:"#90a4ae",width:"".concat(i.mulUnsafe(c).toString(),"px")}}),l.a.createElement("div",{style:{backgroundColor:"#f44336",width:"".concat(o.mulUnsafe(c).toString(),"px")}}))}));function Or(e){var t=new u.HttpLink({uri:"https://"+e}),n=new Oa.a({uri:"wss://"+e,options:{reconnect:!0}});return Object(u.split)((function(e){var t=e.query,n=Object(Ca.q)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),n,t)}function Cr(){var e,t=j();e=t?"api.thegraph.com/subgraphs/name/miracle2k/all-the-keeps-ropsten":"api.thegraph.com/subgraphs/id/QmRzyd7B2Q2JFWgtygn7NkUo1Zys1cFjRUx96NznvgGNsP";var n=Object(r.useMemo)((function(){return new u.ApolloClient({cache:new u.InMemoryCache,link:Or(e)})}),[]);return l.a.createElement(d.a,null,l.a.createElement(u.ApolloProvider,{client:n},l.a.createElement(O,null,l.a.createElement(rn.a,{chainId:t?3:1},l.a.createElement(_.a,{titleTemplate:"%s | AllTheKeeps"}),l.a.createElement(Br,null),l.a.createElement(Rr,null),l.a.createElement("div",{className:Object(p.a)(jr||(jr=Object(s.a)(["            \n              "])))},l.a.createElement(m.d,null,l.a.createElement(m.b,{path:"/",exact:!0},l.a.createElement(m.a,{to:"/deposits"})),l.a.createElement(m.b,{exact:!0,path:"/deposits"},l.a.createElement(_n,null)),l.a.createElement(m.b,{exact:!0,path:"/deposits/:view"},l.a.createElement(_n,null)),l.a.createElement(m.b,{path:"/about",exact:!0},l.a.createElement(ca,null)),l.a.createElement(m.b,{path:"/torch",exact:!0},l.a.createElement(Ra,null)),l.a.createElement(m.b,{path:"/governance",exact:!0},l.a.createElement(Ea,null)),l.a.createElement(m.b,{path:"/operators",exact:!0},l.a.createElement(He,null)),l.a.createElement(m.b,{path:"/users",exact:!0},l.a.createElement(Ya,null)),l.a.createElement(m.b,{path:"/beacon",exact:!0},l.a.createElement(Za,null)),l.a.createElement(m.b,{path:"/group/:id",exact:!0},l.a.createElement(Ja,null)),l.a.createElement(m.b,{path:"/operator/:operatorId",exact:!0},l.a.createElement(Qt,null)),l.a.createElement(m.b,{path:"/operator/:operatorId/:tabId",exact:!0},l.a.createElement(Qt,null)),l.a.createElement(m.b,{path:"/deposit/:depositId",exact:!0},l.a.createElement($n,null)),l.a.createElement(m.b,{path:"/stakedrop",exact:!0},l.a.createElement(ur,null)),l.a.createElement(m.b,{path:"/grants",exact:!0},l.a.createElement(wr,null))))))))}var zr=function(){var e=window.location.host.indexOf("ropsten")>-1?h.ROPSTEN:h.MAINNET;return l.a.createElement(M,{network:e},l.a.createElement(Cr,null))};function Br(){return l.a.createElement("div",{className:Object(p.a)(Tr||(Tr=Object(s.a)(["\n    background: #fafafa; /* #48DBB4; */\n    border-bottom: 1px #C4C4C4 solid;\n    \n    display: flex;\n    flex-direction: row;\n    padding: 0 20px;   \n  "])))},l.a.createElement("strong",{style:{padding:"10px 20px 10px 0"}},l.a.createElement("img",{src:"/logo.png",height:40,alt:"AllTheKeeps Logo"})),l.a.createElement(ia,{to:"/deposits"},"Deposits"),l.a.createElement(ia,{to:"/operators"},"Operators"),l.a.createElement(ia,{to:"/governance"},"Governance"),l.a.createElement(ia,{to:"/users"},"Users"),l.a.createElement(ia,{to:"/beacon"},"Beacon"),l.a.createElement(ia,{to:"/grants"},"Grants"),l.a.createElement(ia,{to:"/stakedrop"},l.a.createElement("img",{alt:"Stakedrop Icon",style:{height:"2em"},src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjBweCIgeT0iMHB4Igp3aWR0aD0iNjQiIGhlaWdodD0iNjQiCnZpZXdCb3g9IjAgMCAxMjggMTI4IgpzdHlsZT0iIGZpbGw6IzAwMDAwMDsiPjxwYXRoIGZpbGw9IiNGOUE3QjUiIGQ9Ik0xNCw2OS44djE3LjVjMCw3LjMsNS45LDEzLjIsMTMuMiwxMy4yYzEuNywwLDMuMy0wLjMsNC44LTAuOWwwLDBjOS4yLTMuMSwxOS4zLTIuMSwyNy43LDIuN2w2LjcsMy44aDBjNC44LDMuMiwxMC42LDUsMTYuOCw1YzE3LDAsMzAuNy0xMy43LDMwLjctMzAuN1Y2NC43TDE0LDY5Ljh6Ij48L3BhdGg+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTExMC42LDQ4LjhjMC0wLjEtMC4xLTAuMS0wLjEtMC4yYy0wLjItMC4zLTAuMy0wLjYtMC41LTAuOWMtNi0xMC44LTE4LjctMTkuMi0zNy4zLTE5LjJjLTI4LjksMC00OS41LDI0LjUtNTUuNCwzMi41Yy0wLjcsMC44LTEuMywxLjYtMS44LDIuNWMwLDAsMCwwLDAsMGwwLDBjLTEsMS45LTEuNiw0LTEuNiw2LjNjMCw3LjMsNS45LDEzLjIsMTMuMiwxMy4yYzEuNywwLDMuMy0wLjMsNC44LTAuOWwwLDBjOS4yLTMuMSwxOS4zLTIuMSwyNy43LDIuN2w2LjcsMy44aDBjNC44LDMuMiwxMC42LDUsMTYuOCw1YzE3LDAsMzAuNy0xMy43LDMwLjctMzAuN0MxMTQsNTcuNywxMTIuOCw1MywxMTAuNiw0OC44eiI+PC9wYXRoPjxwYXRoIGZpbGw9IiNGRjY5N0QiIGQ9Ik04My4zLDg1LjZjLTQuNCwwLTguOC0xLjMtMTIuNS0zLjdsLTAuMi0wLjFsLTctMy45Yy02LjMtMy42LTEzLjUtNS40LTIwLjctNS40Yy00LjUsMC05LDAuNy0xMy40LDIuMmwtMC4yLDAuMWwtMC4zLDAuMWMtMC42LDAuMi0xLjIsMC40LTEuOSwwLjRjLTIuOSwwLTUuMy0yLjQtNS4zLTUuM2MwLTAuOSwwLjItMS43LDAuNi0yLjVsMCwwYzAuMi0wLjMsMC40LTAuNiwwLjctMC45bDAuMi0wLjNsMC4yLTAuM2M1LjEtNi45LDIzLjgtMjkuMyw0OS4xLTI5LjNjMTQsMCwyNS4xLDUuNSwzMC40LDE1LjFjMC4yLDAuMywwLjMsMC41LDAuNCwwLjdsMCwwLjFjMS43LDMuMywyLjUsNi44LDIuNSwxMC41QzEwNi4xLDc1LjMsOTUuOSw4NS42LDgzLjMsODUuNnoiPjwvcGF0aD48cGF0aCBmaWxsPSIjRkZGIiBkPSJNODMuMyA1NEE4LjggOC44IDAgMSAwIDgzLjMgNzEuNkE4LjggOC44IDAgMSAwIDgzLjMgNTRaIj48L3BhdGg+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjM0Y0QTU0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSI2IiBkPSJNMTE0LDY0Ljd2MTUuNmMwLDE3LTEzLjcsMzAuNy0zMC43LDMwLjdjLTYuMiwwLTEyLTEuOC0xNi44LTVoMGwtNi43LTMuOGMtOC41LTQuOC0xOC41LTUuNy0yNy43LTIuN2wwLDBjLTEuNSwwLjYtMy4xLDAuOS00LjgsMC45Yy03LjMsMC0xMy4yLTUuOS0xMy4yLTEzLjJWNjkuOGMwLTIuMywwLjYtNC40LDEuNi02LjNsMCwwYzAsMCwwLDAsMCwwYzAuNS0wLjksMS4xLTEuNywxLjgtMi41YzUuOS04LDI2LjYtMzIuNSw1NS40LTMyLjVjMTguNiwwLDMxLjMsOC4zLDM3LjMsMTkuMmMwLjIsMC4zLDAuMywwLjYsMC41LDAuOWMwLDAuMSwwLjEsMC4xLDAuMSwwLjJjMi4xLDQuMiwzLjQsOC45LDMuNCwxNCI+PC9wYXRoPjwvc3ZnPg=="})),l.a.createElement(ia,{to:"/torch"},l.a.createElement("img",{alt:"Torch Icon",style:{height:"2em"},src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjBweCIgeT0iMHB4Igp3aWR0aD0iNjQiIGhlaWdodD0iNjQiCnZpZXdCb3g9IjAgMCAxMjggMTI4IgpzdHlsZT0iIGZpbGw6IzAwMDAwMDsiPjxwYXRoIGZpbGw9IiNmY2NhM2QiIGQ9Ik00MC43LDQyLjlMNDAuNyw0Mi45TDU0LDE0bDUsOEw2OSw0YzAsMCwxNy45LDM3LjgsMTguMiwzOC44bDAsMGMxLjEsMi44LDEuOCw1LjksMS44LDkuMiBjMCwxMy44LTExLjIsMjUtMjUsMjVTMzksNjUuOCwzOSw1MkMzOSw0OC44LDM5LjYsNDUuNyw0MC43LDQyLjl6Ij48L3BhdGg+PHBhdGggZmlsbD0iI2ZmNjE0NCIgZD0iTTc5LDY2LjdjLTAuNiwwLTEuMy0wLjItMS44LTAuNmMtMS4zLTEtMS41LTIuOS0wLjUtNC4yQzc4LjgsNTksODAsNTUuNiw4MCw1MmMwLTItMC40LTMuOS0xLjEtNS44IGMtMC4zLTAuNi0yLjMtNS0xMC40LTIyLjFjLTAuNy0xLjUtMC4xLTMuMywxLjQtNGMxLjUtMC43LDMuMy0wLjEsNCwxLjRjNi41LDEzLjcsMTIsMjEuMiwxMi40LDIyLjNjMCwwLDAsMC4xLDAuMSwwLjEgYzEsMi42LDEuNSw1LjMsMS41LDhjMCw1LTMuNiw5LjYtNi43LDEzLjZDODAuNyw2Ni4zLDc5LjgsNjYuNyw3OSw2Ni43eiI+PC9wYXRoPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik02NC42IDY0YzYuOC0uMyAxMi4yLTYuMyAxMS45LTEzLjItLjEtMS4zLS4zLTIuNi0uOC0zLjgtLjMtLjYtLjUtMS4yLS43LTEuNGwtLjItLjR2MGMtLjYtMS4xLTIuMy0uOS0yLjYuNHYwQzcxLjkgNDcgNzAuOCA0OCA2OS40IDQ4Yy0xIDAtMi0uNS0yLjYtMS41TDYyIDM3LjdjLTEuMi0yLjEtNC4zLTItNS4zLjJsLTMuMyA3TDUzIDQ1LjVjLS4yLjQtLjUuOS0uNyAxLjQtLjYgMS41LS45IDMtLjkgNC42QzUxLjUgNTguNiA1Ny40IDY0LjMgNjQuNiA2NHpNNjkgMTI0TDU5IDEyNCA1NCA4OSA3NCA4OXpNNDEgNzdIODdWODlINDF6Ij48L3BhdGg+PHBhdGggZmlsbD0iIzQ0NGI1NCIgZD0iTTg3IDc0aC01LjdDODcuOCA2OC45IDkyIDYwLjkgOTIgNTJjMC0zLjUtLjctNy0yLTEwLjMgMC0uMS0uMS0uMS0uMS0uMi0xLjItMi42LTE0LjEtMjkuOS0xOC4yLTM4LjctLjUtMS0xLjQtMS43LTIuNS0xLjhDNjggLjkgNjcgMS41IDY2LjQgMi41bC03LjUgMTMuNi0yLjMtMy43Yy0uNi0uOS0xLjYtMS41LTIuNy0xLjQtMS4xLjEtMi4xLjctMi41IDEuN0wzOCA0MS42Yy0uMS4xLS4xLjItLjEuNC0xLjIgMy4yLTEuOCA2LjYtMS44IDEwIDAgNS45IDEuOCAxMS41IDUuMiAxNi4yLjkgMS4yIDIuNSAxLjcgMy44IDEuMSAxLjctLjggMi4yLTMgMS4yLTQuNUM0Mi43IDYwIDQxLjMgNTQgNDIuNCA0Ny45Yy4yLTEuNC43LTIuNyAxLjItNGwwIDAgMTAuMS0yMmMuMy0uNyAxLjMtLjggMS44LS4xbDEuMSAxLjdjLjggMS4zIDIuNCAxLjggMy45IDEuMS42LS4zIDEtLjggMS4zLTEuM2w2LjItMTEuMWMuNC0uNyAxLjQtLjcgMS44LjFDNzYuMyAyNi40IDg0LjEgNDMgODQuNSA0My45bDAgLjFjLjMuOC42IDEuNS44IDIuM0M4OSA2MC45IDc4IDc0IDY0IDc0SDQxYy0xLjcgMC0zIDEuMy0zIDN2MTJjMCAxLjcgMS4zIDMgMyAzaDEwLjRsNC42IDMyLjRjLjIgMS41IDEuNSAyLjYgMyAyLjZoMTBjMS41IDAgMi44LTEuMSAzLTIuNkw3Ni42IDkySDg3YzEuNyAwIDMtMS4zIDMtM1Y3N0M5MCA3NS4zIDg4LjcgNzQgODcgNzR6TTY1LjUgMTIxaC0zYy0uNSAwLS45LS40LTEtLjlsLTMuOS0yN2MtLjEtLjYuNC0xLjEgMS0xLjFoMTAuOGMuNiAwIDEuMS41IDEgMS4xbC0zLjkgMjdDNjYuNCAxMjAuNiA2NiAxMjEgNjUuNSAxMjF6TTgzIDg2SDQ1Yy0uNiAwLTEtLjQtMS0xdi00YzAtLjYuNC0xIDEtMWgzOGMuNiAwIDEgLjQgMSAxdjRDODQgODUuNiA4My42IDg2IDgzIDg2ek0zOSAxQTMgMyAwIDEgMCAzOSA3IDMgMyAwIDEgMCAzOSAxeiI+PC9wYXRoPjwvc3ZnPg=="})),l.a.createElement("div",{style:{flex:1}}),l.a.createElement(Ur,null),l.a.createElement(ia,{to:"/about"},"About"))}function Rr(){var e=C(),t=Object(m.h)(),n=Object(r.useMemo)((function(){var e=new URLSearchParams(t.search);return e.has("block")&&e.delete("block"),"".concat(t.pathname).concat(e.toString())}),[t.pathname,t.search]);return e?l.a.createElement("div",{className:Object(p.a)(Dr||(Dr=Object(s.a)(["\n    padding: 8px;\n    font-size: 14px;\n    background-color: #fff9c4;\n  "])))},"You are viewing the state at a block height of ",l.a.createElement("strong",null,e),"."," ",l.a.createElement(d.b,{to:n,style:{color:"#5519d3"}},"Exit Time Travel"),"."):null}function Ur(){var e=Object(r.useRef)();return l.a.createElement(G.a,{trigger:"manual",hideOnClick:!0,arrow:!1,interactive:!0,maxWidth:600,className:Object(p.a)(kr||(kr=Object(s.a)(["\n        background-color: transparent;\n        padding: 0;\n        color: inherit;\n      "]))),onCreate:function(t){e.current=t},content:l.a.createElement(E,null,l.a.createElement("div",{className:Object(p.a)(Nr||(Nr=Object(s.a)(["\n          display: flex;\n          flex-direction: column;\n        "])))},l.a.createElement(Pr,null),l.a.createElement("hr",{className:Object(p.a)(Lr||(Lr=Object(s.a)(["\n            width: 100%;\n            border: none;\n            border-top: 1px solid silver;\n          "])))}),l.a.createElement("div",{className:Object(p.a)(Ar||(Ar=Object(s.a)(["\n            display: inline-block;\n            padding: 10px;\n          "])))},l.a.createElement("div",null,l.a.createElement("strong",null,"Time Travel"),l.a.createElement("div",{style:{color:"gray"}},"Browse state at a specific block time.")),l.a.createElement("div",null,l.a.createElement(Fr,null)))))},l.a.createElement(ia,{onClick:function(t){t.preventDefault(),e.current.show()}},l.a.createElement("img",{alt:"Preferences Icon",style:{height:"2em"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAAHOUlEQVR4nO2bW2wWRRTHf62lCYLUUNCIJArG0AqJtKUgSePdAtGEqFBCUsMLN33xzXdiYixQBCsRXxVowXc1AaJQLoLGcH0Bg1KgEC6JAhqorfXhnMlM97777fe1kv6TzX7f7JmZM7NzrjMLoxhFKVEHHATuAYOe6x7QDcweNu6KjIeBG/gH7r2uA1XDxGNRsRoZYDcwIeD5BGR1DAKrSsVUeak6Al7W+3bgVsDzW8AO/f1SSTgqMS4jb3dGBE2t0vSWhKMSIs3AkkxUbsgiAlVAO3AU+ApoSFDnBb3vT0DbrfcXE9DOQcTmKLCREijPR4EzDNXaA8A2YGJEvS6lXZOgj7VK2xlBU619Dnh4OaM8FgXu4E8AzcAGoA9rvlbiX1VlwFWSL+sarLiUeZ6VIxbCmNM+5aEZOEkRJ8E7+EnOs1pgH/Yt/IgViyZgt5ZfSNhXGdCjdbq0DYBG4JjTz17t22Cy8pb7JFRhB3+coYN3sQy4hBWLsw6zfwFvp+hzqdYx9c9hl/tFoCWknncSctEJ7QS/+SCMB9qwYtELrAOmZOh3itbtxbrKbdpHFCZhJ2FDhn59OKKNNaeoUw3UAxU59F+hbVWnqLMQ4flQHGESM3he76+mYOAm8AvQn6JOGPq1rZsp6ryi9/ORVAnRgMjfPYYqnZGKWkQEB0jmoyTCF1jNO9LxHcLr53k2Wo21vWEaOA5lwFzgI+BNp3wy8BOwB1F6c7KzyTKsTxLlmGXCKqwZitPELsqBVuBXrFk77jx/CrjLUJOZxUUfr7wNIg5Z7ijHOiJtCes8DfyMHVwPsAm/RzgJWAx8DLyXkb82rCNWtDC/EasQ48zSG8CfytTvwDsZGRsLPB5DU6085ar4wnAOGVR9BM1r2LxfF+lExsUjwClERKKcqXrt62zGfhKjCevhjQmhqQVuK117AX2NQwY/qPexEbRjsB5jUwRdwdilnawLef4A1nPcgT+aA5gFbAZOA3f0Oq1lsxy66YgTdApZCXFYp/3uTkCbGDVIfN4JXMFq6bDluBKr7LyBSCWwFX8M7179QIfSAkwDHnTaqCBcj0zBBlBXEdF7l5TOWxWSve3ELin3ukB4VFeGjRqXe55VYkPmu8AWYB6yzMfp7w6s3tiLnQSAqcB6xB0+EsH/EuXRy/cVHdNqIiLEOvx5+15gJ5LJiUtmPI+dJG8QtFWfXQKejWhjNjak/tQpd03p1zF8oLyuIfhFXidk88Xk5Lu1ck2Cjlx8SHAIOgtZ2neJHrxBHbIS+oGZWrYCSYE1puTJoAYZkxnjgSAi440FbVokwX6tv8hTvlnLt6Ro6zOtsykjL2GYgBVDH8wSyYrftP4TnnKjF+Z6yl9HlvtF/JP2HNb85Y3QcRY6AXe0/jhP+S0t9zpDxm83VsPFQ1ru7iAdcui7yY4h48zTZzZt/Ztjmy4GQ37n2kEhDZsdnameciMC8zzli5BV0IOksFzMZxhEoFAl+APBSvAT/GYtDsZsFuJKByFSCXZTmBlcT3CoPBNrBpMcfqjHmsFntOwDJGnyPnLOIC1qEY/WmMHALbo6xEnI6giZQOkCEhO46MA6QlGTUI8Vpc1OeafD0+WA9r0IcuHNdY0If8R1hb0VzeCWhNQtw2Z9Wj3PKhH31uT3OxA5H6/XfGTZG1d4D0OjzQrgLeAbJCALQwt2V8n7IjuRrFYqETdLpwu7vxcVDK3AJkC8HVUieqA/gEFz/YO8eTP46fjNahjcYMj4/mtJL8qRMPt8UeGwSZvtJDgcnol4eKeQvMFt/d2OlXnIHg5HrZCCkSQhMgObENlE8CQkwYhMiIDd9IxKiTVj5XkX4tklwSokqWlELG1K7FzCfjLD3SWKS4ouBP5AGLuI39kBcW9dt9ZswLgR5VjiN1fdpGjWiDEW5cjbCbL1YagBDhP+drxeWaP+v0n6jVWTFj9GkdLiJt2VZWNkOcGyGeSWdiKDiLP1XrgbI7mfM5yIdZKW5djuQUKSExnRgvB4g3Tb6bHYhs3VjXR8i/C6La8GjeLr4/+zPZ7rLtFOgnN9IxkmMNseR5hEW07Te5rl/xiSAsvriEwD6WR6n96fzKF/NiKzmeaQlHGC8jwk1Uf6Q1LrM/Trg3tM7gRyoCEILVgzNIDdRB0E/kaOviXFUq1j6p/F7ihdItwSuYM/Q/bkjg/eg5LuJNRiQ13jiBhvrAl7TLaH5HGBCWl3Y/2HBqwjNogsc1cpewdf1NOiJ4EFiHiYM4E3EAck6KisyS0kCU1nKO1Vgo/KrsT6JH3KwwKKfFTWIOqwdJSSMhmdtQn6WKO0XRE0ExmGw9IGVYhJPAJ8STJba06ARw3KIM1kNSgPhxEFmZvM5w1zAvwK8XrA5ARzzeSMBCQZWJqJygWl/GjKBD1RX4KYZ2aPoego5QR8r/dWwj+ba/XQ3leowr/vEHRd4z79cBJkU+QA4Z/O7ifZIYpRjCIn/AcS7Ji+h79KkwAAAABJRU5ErkJggg=="})))}function Pr(){var e=y();return l.a.createElement("div",{className:Object(p.a)(Ir||(Ir=Object(s.a)(["\n    display: inline-block;\n    padding: 10px;\n  "])))},l.a.createElement("div",{style:{marginBottom:5}},l.a.createElement("strong",null,e==h.MAINNET?"Mainnet":"Ropsten Testnet")),l.a.createElement(ln,{size:"tiny",onClick:function(){e==h.MAINNET?window.location.href="https://ropsten.allthekeeps.com":window.location.href="https://allthekeeps.com"}},e==h.MAINNET?"Switch to Ropsten Testnet":"Switch to Mainnet"))}function Fr(){var e,t=C(),n=Object(m.g)(),a=Object(m.h)(),o=Object(r.useState)(null!==(e=null===t||void 0===t?void 0:t.toString())&&void 0!==e?e:""),i=Object(c.a)(o,2),u=i[0],d=i[1],E=function(){var e=parseInt(u);if(e&&u){var t=new URLSearchParams(a.search);t.set("block",e.toString()),n.push("".concat(a.pathname,"?").concat(t.toString()))}};return l.a.createElement("input",{value:u,placeholder:"Block Number",className:Object(p.a)(xr||(xr=Object(s.a)(["\n      padding: 0.4em;\n      margin-top: 5px;\n    "]))),onChange:function(e){d(e.target.value)},onBlur:function(e){E()},onKeyDown:function(e){13==e.keyCode&&E()}})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(zr,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},40:function(e,t,n){"use strict";(function(e){var a=n(59),r=n(5),l=n.n(r),o=n(9),i=n(94),c=n.n(i),s=n(188),u=n.n(s),d=n(107),m=n.n(d),p=n(136),E=n.n(p),h=n(106),b=n.n(h),f=n(139),g=n.n(f),v=n(189),w=n.n(v),M=n(118),y=w.a.Script,j={Network:{TESTNET:"testnet",MAINNET:"main",SIMNET:"simnet",REGTEST:"regtest"},electrumConfig:null,setElectrumConfig:function(e){j.electrumConfig=e},signatureDER:function(t,n){var a=c.a.signatureNormalize(e.from(t.concat(n),"hex"));return c.a.signatureExport(a)},publicKeyPointToPublicKeyString:function(e,t){return"".concat(e.replace("0x","")).concat(t.replace("0x",""))},Address:{publicKeyPointToP2WPKHAddress:function(e,t,n){return this.publicKeyToP2WPKHAddress(j.publicKeyPointToPublicKeyString(e,t),n)},pubKeyHashToBech32:function(t,n){var a=y.fromProgram(0,e.from(t,"hex")).getAddress();if(null===a)throw new Error("Malformed PubKeyHash: ".concat(t));return a.toBech32(n)},splitPublicKey:function(t){var n=[t.substring(0,t.length/2),t.substring(t.length/2)],a=n[0],r=n[1];return{x:e.from(a,"hex"),y:e.from(r,"hex")}},publicKeyToP2WPKHAddress:function(e,t){var n=c.a.publicKeyImport(j.Address.splitPublicKey(e),!0),a=u.a.fromKey(n,!0),r=y.fromProgram(0,a.getKeyHash(null)).getAddress();if(null===r)throw new Error("Could not derive p2wpkh address from public key ".concat(e,"."));return r.toString(t)},toScript:function(e){return j.Address.toRawScript(e).toString("hex")},fromScript:function(t){return t=(t=t.slice(2)).slice(2),y.fromRaw(e.from(t,"hex")).getAddress().toString()},toRawScript:function(e){return y.fromAddress(e).toRaw()}},withElectrumClient:function(){var e=Object(o.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==j.electrumConfig){e.next=2;break}throw new Error("Electrum client not configured.");case 2:return n=new M.a(j.electrumConfig),e.next=5,n.connect();case 5:return(a=t(n)).then((function(){n.close()}),(function(){n.close()})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Transaction:{find:function(){var e=Object(o.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=j.Address.toScript(t),e.next=3,j.Transaction.findScript(a,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),findScript:function(){var e=Object(o.a)(l.a.mark((function e(t,n,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.withElectrumClient((function(e){return j.Transaction.findWithClient(e,t,n,a)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),findOrWaitFor:function(){var e=Object(o.a)(l.a.mark((function e(t,n,a){var r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j.Address.toScript(n),i=function(){var e=Object(o.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=2;break}return e.abrupt("return",j.Transaction.findWithClient(t,r,a));case 2:return e.abrupt("return",null);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.abrupt("return",t.onTransactionToScript(r,i));case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),checkForConfirmations:function(){var e=Object(o.a)(l.a.mark((function e(t,n,a){var r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTransaction(n);case 2:if(r=e.sent,!((o=r.confirmations)>=a)){e.next=6;break}return e.abrupt("return",o);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),waitForConfirmations:function(){var e=Object(o.a)(l.a.mark((function e(t,n,a,r){var i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){var e=Object(o.a)(l.a.mark((function e(o){var c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTransaction(n);case 2:c=e.sent,s=c.confirmations,"function"===typeof r&&s&&r({transactionID:n,confirmations:s,requiredConfirmations:a}),s>=a&&t.off("block",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.on("block",i),e.abrupt("return",(function(){t.off("block",i)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),broadcast:function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.withElectrumClient(function(){var e=Object(o.a)(l.a.mark((function e(n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.broadcastTransaction(t);case 2:return a=e.sent,e.abrupt("return",{transactionID:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addWitnessSignature:function(t,n,a,r,l){var o;try{o=j.signatureDER(a,r)}catch(p){throw new Error("failed to convert signature to DER format: [".concat(p,"]"))}var i,s,u=e.from([y.hashType.ALL]),d=e.concat([o,u]);try{var m=j.Address.splitPublicKey(l);i=c.a.publicKeyImport(m,!0)}catch(p){throw new Error("failed to import public key: [".concat(p,"]"))}try{s=g.a.fromRaw(e.from(t,"hex"),null).clone()}catch(p){throw new Error("failed to import transaction: [".concat(p,"]"))}return s.inputs[n].witness.fromItems([d,i]),s.toRaw().toString("hex")},constructOneInputOneOutputWitnessTransaction:function(t,n,a,r){var l=m.a.fromRaw(e.from(t,"hex")),o=E.a.fromOptions({prevout:l,sequence:n}),i=e.from(r,"hex"),c=b.a.fromOptions({value:a,script:i});return g.a.fromOptions({inputs:[o],outputs:[c]}).toRaw().toString("hex")},findAllUnspent:function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.withElectrumClient(function(){var e=Object(o.a)(l.a.mark((function e(n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=j.Address.toScript(t),e.abrupt("return",j.Transaction.findAllUnspentWithClient(n,a));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getBalance:function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.withElectrumClient(function(){var e=Object(o.a)(l.a.mark((function e(n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=j.Address.toScript(t),e.t0=Number,e.next=4,n.getBalanceOfScript(a);case 4:return e.t1=e.sent.confirmed,e.abrupt("return",(0,e.t0)(e.t1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),findWithClient:function(){var e=Object(o.a)(l.a.mark((function e(t,n,r,o){var i,c,s,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getUnspentToScript(n);case 2:i=e.sent,c=Object(a.a)(i.reverse()),e.prev=4,c.s();case 6:if((s=c.n()).done){e.next=19;break}if((u=s.value).value===r){e.next=10;break}return e.abrupt("continue",17);case 10:if("undefined"===typeof o){e.next=16;break}return e.next=13,t.getTransaction(u.tx_hash);case 13:if(e.sent.vin.some((function(e){return e.txid+e.vout==o}))){e.next=16;break}return e.abrupt("continue",17);case 16:return e.abrupt("return",{transactionID:u.tx_hash,outputPosition:u.tx_pos,value:u.value});case 17:e.next=6;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(4),c.e(e.t0);case 24:return e.prev=24,c.f(),e.finish(24);case 27:return e.abrupt("return",null);case 28:case"end":return e.stop()}}),e,null,[[4,21,24,27]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),findAllUnspentWithClient:function(){var e=Object(o.a)(l.a.mark((function e(t,n){var r,o,i,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getUnspentToScript(n);case 2:r=e.sent,o=[],i=Object(a.a)(r.reverse());try{for(i.s();!(c=i.n()).done;)s=c.value,o.push({transactionID:s.tx_hash,outputPosition:s.tx_pos,value:s.value})}catch(l){i.e(l)}finally{i.f()}return e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}};t.a=j}).call(this,n(8).Buffer)}},[[197,6,7]]]);
//# sourceMappingURL=main.fe8999e1.chunk.js.map